<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MeasurementSystem.core.driver.Hardware &mdash; Measurement System 0.1.dev38+g7a2a8bf.d20241012 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />


  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=1e1f024c"></script>
        <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
</head>

<body class="wy-body-for-nav">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980b9" >



          <a href="../../../../index.html">

              <img src="../../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.1.dev38+g7a2a8bf.d20241012
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference.html#module-MeasurementSystem.measurement_server">Measurement Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.ControlTask"><code class="docutils literal notranslate"><span class="pre">ControlTask</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.ControlTask.SendCommandCallbackType"><code class="docutils literal notranslate"><span class="pre">SendCommandCallbackType</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.ControlTask.add_command"><code class="docutils literal notranslate"><span class="pre">add_command()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.ControlTask.start"><code class="docutils literal notranslate"><span class="pre">start()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.ControlTask.stop"><code class="docutils literal notranslate"><span class="pre">stop()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.ControlTaskManager"><code class="docutils literal notranslate"><span class="pre">ControlTaskManager</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.ControlTaskManager.add_command_to_task"><code class="docutils literal notranslate"><span class="pre">add_command_to_task()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.ControlTaskManager.initialize_tasks"><code class="docutils literal notranslate"><span class="pre">initialize_tasks()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.ControlTaskManager.start_tasks"><code class="docutils literal notranslate"><span class="pre">start_tasks()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.ControlTaskManager.stop_tasks"><code class="docutils literal notranslate"><span class="pre">stop_tasks()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.HardwareInterface"><code class="docutils literal notranslate"><span class="pre">HardwareInterface</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.HardwareInterface.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.HardwareInterface.from_json"><code class="docutils literal notranslate"><span class="pre">from_json()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.HardwareInterface.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.HardwareInterface.to_json"><code class="docutils literal notranslate"><span class="pre">to_json()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.MeasurementSystem"><code class="docutils literal notranslate"><span class="pre">MeasurementSystem</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.MeasurementSystem.add_command_to_send_queue"><code class="docutils literal notranslate"><span class="pre">add_command_to_send_queue()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.MeasurementSystem.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.MeasurementSystem.init_comvisu"><code class="docutils literal notranslate"><span class="pre">init_comvisu()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.MeasurementSystem.printConsole"><code class="docutils literal notranslate"><span class="pre">printConsole()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.MeasurementSystem.process_commands"><code class="docutils literal notranslate"><span class="pre">process_commands()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.MeasurementTask"><code class="docutils literal notranslate"><span class="pre">MeasurementTask</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.MeasurementTask.SendCommandCallbackType_2"><code class="docutils literal notranslate"><span class="pre">SendCommandCallbackType_2</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.MeasurementTask.start"><code class="docutils literal notranslate"><span class="pre">start()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.MeasurementTask.stop"><code class="docutils literal notranslate"><span class="pre">stop()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.MeasurementTaskManager"><code class="docutils literal notranslate"><span class="pre">MeasurementTaskManager</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.MeasurementTaskManager.initialize_tasks"><code class="docutils literal notranslate"><span class="pre">initialize_tasks()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.MeasurementTaskManager.start_tasks"><code class="docutils literal notranslate"><span class="pre">start_tasks()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.MeasurementTaskManager.stop_tasks"><code class="docutils literal notranslate"><span class="pre">stop_tasks()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.measurement_server.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference.html#module-MeasurementSystem.core.Utils">Core Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.Utils.OrderedPriorityQueue"><code class="docutils literal notranslate"><span class="pre">OrderedPriorityQueue</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.Utils.OrderedPriorityQueue.get"><code class="docutils literal notranslate"><span class="pre">get()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.Utils.OrderedPriorityQueue.put"><code class="docutils literal notranslate"><span class="pre">put()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference.html#module-MeasurementSystem.core.driver.Hardware">Hardware Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel"><code class="docutils literal notranslate"><span class="pre">Channel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel.set_model_from_str"><code class="docutils literal notranslate"><span class="pre">set_model_from_str()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelManager"><code class="docutils literal notranslate"><span class="pre">ChannelManager</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelManager.add_channels"><code class="docutils literal notranslate"><span class="pre">add_channels()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelManager.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelManager.get_channels"><code class="docutils literal notranslate"><span class="pre">get_channels()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelManager.get_channels_by_name"><code class="docutils literal notranslate"><span class="pre">get_channels_by_name()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelManager.get_channels_by_type"><code class="docutils literal notranslate"><span class="pre">get_channels_by_type()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelManager.get_modules"><code class="docutils literal notranslate"><span class="pre">get_modules()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelProperties"><code class="docutils literal notranslate"><span class="pre">ChannelProperties</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelProperties.Type"><code class="docutils literal notranslate"><span class="pre">Type</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC118_VoltageChannel"><code class="docutils literal notranslate"><span class="pre">Channel_MCC118_VoltageChannel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC118_VoltageChannel.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC118_VoltageChannel.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC118_VoltageChannel.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC118_VoltageChannel.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC134_ThermocoupleChannel"><code class="docutils literal notranslate"><span class="pre">Channel_MCC134_ThermocoupleChannel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC134_ThermocoupleChannel.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC134_ThermocoupleChannel.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC134_ThermocoupleChannel.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC134_ThermocoupleChannel.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_BufferedDigitalInput"><code class="docutils literal notranslate"><span class="pre">Channel_RPI_BufferedDigitalInput</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_BufferedDigitalInput.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_BufferedDigitalInput.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_BufferedDigitalInput.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalInput"><code class="docutils literal notranslate"><span class="pre">Channel_RPI_DigitalInput</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalInput.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalInput.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalInput.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalInput.readRaw"><code class="docutils literal notranslate"><span class="pre">readRaw()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalOutput"><code class="docutils literal notranslate"><span class="pre">Channel_RPI_DigitalOutput</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalOutput.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalOutput.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalOutput.write"><code class="docutils literal notranslate"><span class="pre">write()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_FrequencyCounter"><code class="docutils literal notranslate"><span class="pre">Channel_RPI_FrequencyCounter</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_FrequencyCounter.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_FrequencyCounter.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_FrequencyCounter.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_InternalTemperature"><code class="docutils literal notranslate"><span class="pre">Channel_RPI_InternalTemperature</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_InternalTemperature.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_InternalTemperature.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_InternalTemperature.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Config"><code class="docutils literal notranslate"><span class="pre">Config</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Data"><code class="docutils literal notranslate"><span class="pre">Data</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Data.add_value"><code class="docutils literal notranslate"><span class="pre">add_value()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Data.clear"><code class="docutils literal notranslate"><span class="pre">clear()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Data.get_all"><code class="docutils literal notranslate"><span class="pre">get_all()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Data.get_count"><code class="docutils literal notranslate"><span class="pre">get_count()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Data.get_last"><code class="docutils literal notranslate"><span class="pre">get_last()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware"><code class="docutils literal notranslate"><span class="pre">Hardware</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_DigilentMCC118"><code class="docutils literal notranslate"><span class="pre">Hardware_DigilentMCC118</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_DigilentMCC118.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_DigilentMCC118.handle"><code class="docutils literal notranslate"><span class="pre">handle</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_DigilentMCC118.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_DigilentMCC134"><code class="docutils literal notranslate"><span class="pre">Hardware_DigilentMCC134</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_DigilentMCC134.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_DigilentMCC134.handle"><code class="docutils literal notranslate"><span class="pre">handle</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_DigilentMCC134.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_RaspberryPi"><code class="docutils literal notranslate"><span class="pre">Hardware_RaspberryPi</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_RaspberryPi.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_RaspberryPi.handle"><code class="docutils literal notranslate"><span class="pre">handle</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_RaspberryPi.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.InputChannel"><code class="docutils literal notranslate"><span class="pre">InputChannel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.InputChannel.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.InputModule"><code class="docutils literal notranslate"><span class="pre">InputModule</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.InputModule.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.KTYxModel"><code class="docutils literal notranslate"><span class="pre">KTYxModel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.KTYxModel.apply"><code class="docutils literal notranslate"><span class="pre">apply()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.KTYxModel.to_string"><code class="docutils literal notranslate"><span class="pre">to_string()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.LinearModel"><code class="docutils literal notranslate"><span class="pre">LinearModel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.LinearModel.apply"><code class="docutils literal notranslate"><span class="pre">apply()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.LinearModel.to_string"><code class="docutils literal notranslate"><span class="pre">to_string()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Model"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Model.apply"><code class="docutils literal notranslate"><span class="pre">apply()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Model.parse_model_list"><code class="docutils literal notranslate"><span class="pre">parse_model_list()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Model.to_string"><code class="docutils literal notranslate"><span class="pre">to_string()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ModelMeta"><code class="docutils literal notranslate"><span class="pre">ModelMeta</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ModelMeta.model_registry"><code class="docutils literal notranslate"><span class="pre">model_registry</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module"><code class="docutils literal notranslate"><span class="pre">Module</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_ServoMotor"><code class="docutils literal notranslate"><span class="pre">Module_RPI_ServoMotor</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_ServoMotor.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_ServoMotor.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_ServoMotor.write"><code class="docutils literal notranslate"><span class="pre">write()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor"><code class="docutils literal notranslate"><span class="pre">Module_RPI_StepperMotor</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.calibrate"><code class="docutils literal notranslate"><span class="pre">calibrate()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.disable_stepper"><code class="docutils literal notranslate"><span class="pre">disable_stepper()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.enable_stepper"><code class="docutils literal notranslate"><span class="pre">enable_stepper()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.getPosition"><code class="docutils literal notranslate"><span class="pre">getPosition()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.setDirection"><code class="docutils literal notranslate"><span class="pre">setDirection()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.write"><code class="docutils literal notranslate"><span class="pre">write()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711"><code class="docutils literal notranslate"><span class="pre">Module_RPI_WeighScalesHX711</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.ReadType"><code class="docutils literal notranslate"><span class="pre">ReadType</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.initialize"><code class="docutils literal notranslate"><span class="pre">initialize()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.powerDown"><code class="docutils literal notranslate"><span class="pre">powerDown()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.readAverage"><code class="docutils literal notranslate"><span class="pre">readAverage()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.readMedian"><code class="docutils literal notranslate"><span class="pre">readMedian()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.readRaw"><code class="docutils literal notranslate"><span class="pre">readRaw()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.wakeup"><code class="docutils literal notranslate"><span class="pre">wakeup()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiChannel"><code class="docutils literal notranslate"><span class="pre">MultiChannel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiChannel.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware"><code class="docutils literal notranslate"><span class="pre">MultiHardware</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware.add_hardware"><code class="docutils literal notranslate"><span class="pre">add_hardware()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware.close"><code class="docutils literal notranslate"><span class="pre">close()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware.get_channels"><code class="docutils literal notranslate"><span class="pre">get_channels()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware.get_channels_by_name"><code class="docutils literal notranslate"><span class="pre">get_channels_by_name()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware.get_channels_by_type"><code class="docutils literal notranslate"><span class="pre">get_channels_by_type()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware.get_hardware"><code class="docutils literal notranslate"><span class="pre">get_hardware()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware.get_hardware_by_name"><code class="docutils literal notranslate"><span class="pre">get_hardware_by_name()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.NTCModel"><code class="docutils literal notranslate"><span class="pre">NTCModel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.NTCModel.apply"><code class="docutils literal notranslate"><span class="pre">apply()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.NTCModel.to_string"><code class="docutils literal notranslate"><span class="pre">to_string()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.OutputChannel"><code class="docutils literal notranslate"><span class="pre">OutputChannel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.OutputChannel.write"><code class="docutils literal notranslate"><span class="pre">write()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.OutputModule"><code class="docutils literal notranslate"><span class="pre">OutputModule</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.OutputModule.write"><code class="docutils literal notranslate"><span class="pre">write()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.PTxModel"><code class="docutils literal notranslate"><span class="pre">PTxModel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.PTxModel.apply"><code class="docutils literal notranslate"><span class="pre">apply()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.PTxModel.to_string"><code class="docutils literal notranslate"><span class="pre">to_string()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Serializable"><code class="docutils literal notranslate"><span class="pre">Serializable</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Serializable.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Serializable.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.StackedModel"><code class="docutils literal notranslate"><span class="pre">StackedModel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.StackedModel.apply"><code class="docutils literal notranslate"><span class="pre">apply()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.StackedModel.to_string"><code class="docutils literal notranslate"><span class="pre">to_string()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference.html#communication-visualization">Communication &amp; Visualization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#module-MeasurementSystem.core.comvisu.Command">Command Module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.comvisu.Command.Command"><code class="docutils literal notranslate"><span class="pre">Command</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../reference.html#module-MeasurementSystem.core.comvisu.ServerUtils">Server Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.comvisu.ServerUtils.DataQueueThread"><code class="docutils literal notranslate"><span class="pre">DataQueueThread</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../reference.html#MeasurementSystem.core.comvisu.ServerUtils.ServerConnection"><code class="docutils literal notranslate"><span class="pre">ServerConnection</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980b9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Measurement System</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">MeasurementSystem.core.driver.Hardware</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">

  <h1>Source code for MeasurementSystem.core.driver.Hardware</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Generator</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">NewType</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">import</span> <span class="nn">lgpio</span>
<span class="kn">from</span> <span class="nn">daqhats</span> <span class="kn">import</span> <span class="n">TcTypes</span><span class="p">,</span> <span class="n">mcc118</span><span class="p">,</span> <span class="n">mcc134</span>
<span class="kn">from</span> <span class="nn">daqhats.hats</span> <span class="kn">import</span> <span class="n">OptionFlags</span>

<span class="n">GPIOHandle</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;GPIOHandle&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="n">Time_ns</span> <span class="o">=</span> <span class="n">NewType</span><span class="p">(</span><span class="s2">&quot;Time_ns&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">importlib</span>


<div class="viewcode-block" id="Data">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Data">[docs]</a>
<span class="k">class</span> <span class="nc">Data</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :class:`Data` provides a container for storing and managing data, including its values, units, and other relevant metadata.</span>

<span class="sd">    :return: None</span>
<span class="sd">    :rtype: None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a Data object.</span>

<span class="sd">        This method initializes a Data object. It creates an empty list to store</span>
<span class="sd">        data points.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_data_list</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="Data.add_value">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Data.add_value">[docs]</a>
    <span class="k">def</span> <span class="nf">add_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a value to the data list with the current timestamp in nanoseconds.</span>

<span class="sd">        :param value: The value to add to the data list.</span>
<span class="sd">        :type value: float</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time_ns</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">value</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">))</span></div>


<div class="viewcode-block" id="Data.clear">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Data.clear">[docs]</a>
    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clear all data points from the data list.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_list</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>


    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">Time_ns</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterate over the data points.</span>

<span class="sd">        :return: An iterator over the data points with the according timestamp.</span>
<span class="sd">        :rtype: Iterator[Tuple[float, Time_ns]]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_list</span><span class="p">)</span>

<div class="viewcode-block" id="Data.get_last">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Data.get_last">[docs]</a>
    <span class="k">def</span> <span class="nf">get_last</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">Time_ns</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the last data point.</span>

<span class="sd">        :return: The last data point in the data list. If the data list is empty, None is returned.</span>
<span class="sd">        :rtype: Tuple[float, Time_ns]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_list</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># TODO: check if .copy() is needed like in get_all</span>
        <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># TODO: check if raising an error is needed</span></div>


<div class="viewcode-block" id="Data.get_all">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Data.get_all">[docs]</a>
    <span class="k">def</span> <span class="nf">get_all</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">Time_ns</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a copy of all data points.</span>

<span class="sd">        :return: A copy of all data points in the data list.</span>
<span class="sd">        :rtype: List[Tuple[float, Time_ns]]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_list</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span></div>


<div class="viewcode-block" id="Data.get_count">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Data.get_count">[docs]</a>
    <span class="k">def</span> <span class="nf">get_count</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the number of data points in the data list.</span>

<span class="sd">        :return: The number of data points in the data list.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_list</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Serializable">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Serializable">[docs]</a>
<span class="k">class</span> <span class="nc">Serializable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A base class for objects that can be serialized and deserialized.</span>

<span class="sd">    The Serializable class provides a common interface for objects that need to be converted to and from a serialized format,</span>
<span class="sd">    such as JSON or XML. It defines methods for serializing and deserializing objects, allowing them to be easily stored or transmitted.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Serializable.to_dict">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Serializable.to_dict">[docs]</a>
    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert an object to a dictionary.</span>

<span class="sd">        This method returns a dictionary representation of an object. If the object</span>
<span class="sd">        has a __dict__ attribute, it is used to construct the dictionary. If not,</span>
<span class="sd">        the object is assumed to be a list and it is converted to a list of</span>
<span class="sd">        dictionaries by calling to_dict on each element.</span>

<span class="sd">        :return: A dictionary representation of the object.</span>
<span class="sd">        :rtype: Dict</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;__dict__&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span>
                <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s2">&quot;module&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span>
                <span class="s2">&quot;attributes&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="n">k</span><span class="p">:</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Serializable</span><span class="p">)</span> <span class="k">else</span> <span class="n">v</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">k</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
                <span class="p">},</span>
            <span class="p">}</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="Serializable.from_dict">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Serializable.from_dict">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">references</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an instance of a Serializable class from a dictionary.</span>

<span class="sd">        This method creates an instance of a Serializable class from a dictionary.</span>
<span class="sd">        The dictionary should contain the following keys:</span>
<span class="sd">        - &#39;class&#39;: The name of the class to create an instance of.</span>
<span class="sd">        - &#39;module&#39;: The name of the module where the class is defined.</span>
<span class="sd">        - &#39;id&#39;: A unique identifier for the instance.</span>
<span class="sd">        - &#39;attributes&#39;: A dictionary of attributes to set on the instance.</span>

<span class="sd">        If the &#39;attributes&#39; dictionary contains a key with a value that is a</span>
<span class="sd">        dictionary, it is assumed to be a Serializable object and is converted</span>
<span class="sd">        to an instance using from_dict. If the value is a list, each element of</span>
<span class="sd">        the list is converted to an instance using from_dict.</span>

<span class="sd">        If the &#39;attributes&#39; dictionary contains a key with a value that is not</span>
<span class="sd">        a dictionary or a list, it is set as an attribute of the instance using</span>
<span class="sd">        setattr.</span>

<span class="sd">        If the instance has an &#39;initialize&#39; method, it is called after all</span>
<span class="sd">        attributes have been set.</span>

<span class="sd">        :param data: The dictionary to create an instance from.</span>
<span class="sd">        :type data: Dict[str, Any]</span>
<span class="sd">        :param references: A dictionary to store references to created instances.</span>
<span class="sd">        :type references: Dict[int, Any]</span>

<span class="sd">        :return: The created instance.</span>
<span class="sd">        :rtype: Any</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">references</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">references</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="s2">&quot;reference&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">references</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;reference&quot;</span><span class="p">]]</span>

        <span class="n">module_name</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;module&quot;</span><span class="p">]</span>
        <span class="n">class_name</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">]</span>
        <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">class_name</span><span class="p">)</span>

        <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">references</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">instance</span>  <span class="c1"># Store the instance in the references</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;attributes&quot;</span><span class="p">,</span> <span class="p">{})</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;class&quot;</span> <span class="ow">in</span> <span class="n">value</span> <span class="ow">and</span> <span class="s2">&quot;module&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">Serializable</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="nb">setattr</span><span class="p">(</span>
                    <span class="n">instance</span><span class="p">,</span>
                    <span class="n">key</span><span class="p">,</span>
                    <span class="p">[</span><span class="n">Serializable</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="k">else</span> <span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Check if the key corresponds to a property with a setter</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="nb">hasattr</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">key</span><span class="p">),</span> <span class="nb">property</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span><span class="o">.</span><span class="n">fset</span>
                <span class="p">):</span>
                    <span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s2">&quot;initialize&quot;</span><span class="p">):</span>
            <span class="n">instance</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">instance</span></div>
</div>



<div class="viewcode-block" id="Model">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Model">[docs]</a>
<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">Serializable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A base class for mathematical models.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Model.parse_model_list">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Model.parse_model_list">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">parse_model_list</span><span class="p">(</span><span class="n">model_list_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model_registry</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Model</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse a `string of model` instances into a list of Model instances.</span>

<span class="sd">        :param model_list_str: The string of model instances to parse.</span>
<span class="sd">        :type model_list_str: str</span>
<span class="sd">        :param model_registry: A dictionary containing the available models, where the keys are the model names and the values are the model classes.</span>
<span class="sd">        :type model_registry: dict</span>

<span class="sd">        :return: A list of Model instances parsed from the string.</span>
<span class="sd">        :rtype: List[Model]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Remove the outer square brackets</span>
        <span class="n">model_list_str</span> <span class="o">=</span> <span class="n">model_list_str</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;[]&quot;</span><span class="p">)</span>
        <span class="n">model_strs</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;,\s*(?![^()]*\))&quot;</span><span class="p">,</span> <span class="n">model_list_str</span><span class="p">)</span>  <span class="c1"># Split by comma not inside parentheses</span>

        <span class="n">models</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">model_str</span> <span class="ow">in</span> <span class="n">model_strs</span><span class="p">:</span>
            <span class="n">model_str</span> <span class="o">=</span> <span class="n">model_str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="c1"># Handle the instantiation of models using eval</span>
            <span class="c1"># Ensure that model_registry is accessible to eval</span>
            <span class="n">model_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model_str</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># Ensure the string is in the correct format</span>
            <span class="n">model_instance</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">model_str</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;ModelMeta&quot;</span><span class="p">:</span> <span class="n">ModelMeta</span><span class="p">,</span> <span class="o">**</span><span class="n">model_registry</span><span class="p">})</span>
            <span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_instance</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">models</span></div>


<div class="viewcode-block" id="Model.apply">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Model.apply">[docs]</a>
    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;To be implemented by subclasses.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;This method should be implemented by subclasses&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Model.to_string">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Model.to_string">[docs]</a>
    <span class="k">def</span> <span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;To be implemented by subclasses.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;This method should be implemented by subclasses&quot;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="ModelMeta">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ModelMeta">[docs]</a>
<span class="k">class</span> <span class="nc">ModelMeta</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A metaclass for Model classes that provides additional functionality and validation.</span>

<span class="sd">    The ModelMeta class is a metaclass that is used to create Model classes. It provides a way to define and enforce certain</span>
<span class="sd">    constraints and behaviors on Model classes, such as ensuring that they have certain methods or attributes.</span>

<span class="sd">    :param name: The name of the class.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param bases: The base classes of the class.</span>
<span class="sd">    :type bases: tuple</span>
<span class="sd">    :param attrs: The attributes of the class.</span>
<span class="sd">    :type attrs: dict</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">model_registry</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Register the model in the model registry.</span>

<span class="sd">        This method is called when a subclass of Model is defined. It registers the</span>
<span class="sd">        subclass in the model registry, which is a dictionary mapping model names to</span>
<span class="sd">        model classes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">bases</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;Model&quot;</span><span class="p">:</span>
            <span class="n">ModelMeta</span><span class="o">.</span><span class="n">model_registry</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span></div>



<div class="viewcode-block" id="StackedModel">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.StackedModel">[docs]</a>
<span class="k">class</span> <span class="nc">StackedModel</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">ModelMeta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Model that consists of multiple sub-models stacked together.</span>

<span class="sd">    The StackedModel class is a type of Model that combines multiple sub-models to produce a final output.</span>
<span class="sd">    It provides a way to create complex models by stacking simpler models together.</span>

<span class="sd">    The order of the models in the list is important. The first defined model is the first to be applied to the input value.</span>



<span class="sd">    :param models: A list of Model instances.</span>
<span class="sd">    :type models: List[Model]</span>

<span class="sd">    :return: A new StackedModel instance.</span>
<span class="sd">    :rtype: StackedModel</span>

<span class="sd">    Example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            from MeasurementSystem.core.driver.Hardware import Channel</span>
<span class="sd">            from MeasurementSystem.core.driver.Hardware import StackedModel</span>
<span class="sd">            from MeasurementSystem.core.driver.Hardware import LinearModel</span>
<span class="sd">            channel = Channel(&quot;test&quot;, value=300, model=LinearModel(offset=0, gain=1))</span>
<span class="sd">            channel.set_model_from_str(&quot;StackedModel([LinearModel(offset=100, gain=1), LinearModel(offset=0, gain=10)])&quot;)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">models</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Model</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span> <span class="o">=</span> <span class="n">models</span>  <span class="c1"># models are stored like a stack: 1st defined, 1st applied --&gt; be aware of order!</span>

<div class="viewcode-block" id="StackedModel.apply">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.StackedModel.apply">[docs]</a>
    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply the stacked models to a value in order of the models in the list. The result</span>
<span class="sd">        of each model is passed as the input to the next model in the stack.</span>

<span class="sd">        :param value: The value to apply the stacked models to.</span>
<span class="sd">        :type value: float</span>

<span class="sd">        :return: The result of applying the stacked models to the given value.</span>
<span class="sd">        :rtype: float</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">models</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span></div>


<div class="viewcode-block" id="StackedModel.to_string">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.StackedModel.to_string">[docs]</a>
    <span class="k">def</span> <span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: A string representation of the StackedModel instance.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">models_str</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">to_string</span><span class="p">()</span> <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">models</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;StackedModel([</span><span class="si">{</span><span class="n">models_str</span><span class="si">}</span><span class="s2">])&quot;</span></div>
</div>



<div class="viewcode-block" id="LinearModel">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.LinearModel">[docs]</a>
<span class="k">class</span> <span class="nc">LinearModel</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">ModelMeta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A model for a linear expression.</span>
<span class="sd">    output = input * gain + offset</span>

<span class="sd">    :param offset: The offset of the linear model.</span>
<span class="sd">    :type offset: float</span>
<span class="sd">    :param gain: The gain of the linear model.</span>
<span class="sd">    :type gain: float</span>

<span class="sd">    :return: A new LinearModel instance.</span>
<span class="sd">    :rtype: LinearModel</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">gain</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;LinearModel&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">offset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gain</span> <span class="o">=</span> <span class="n">gain</span>

<div class="viewcode-block" id="LinearModel.apply">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.LinearModel.apply">[docs]</a>
    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply the linear model to a value.</span>

<span class="sd">        :param value: The value to apply the linear model to.</span>
<span class="sd">        :type value: float</span>

<span class="sd">        :return: The result of applying the linear model to the given value.</span>
<span class="sd">        :rtype: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">value</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">gain</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span></div>


<div class="viewcode-block" id="LinearModel.to_string">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.LinearModel.to_string">[docs]</a>
    <span class="k">def</span> <span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: A string representation of the LinearModel instance.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;LinearModel(offset=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="si">}</span><span class="s2">, gain=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">gain</span><span class="si">}</span><span class="s2">)&quot;</span></div>
</div>



<div class="viewcode-block" id="NTCModel">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.NTCModel">[docs]</a>
<span class="k">class</span> <span class="nc">NTCModel</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">ModelMeta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A model for an NTC thermistor.</span>
<span class="sd">    The model describes the mathematical relationship between the resistance and temperature.</span>

<span class="sd">    :param r0: The nominal resistance of the NTC thermistor at the reference temperature T0.</span>
<span class="sd">    :type r0: float</span>
<span class="sd">    :param beta: The beta value of the NTC thermistor.</span>
<span class="sd">    :type beta: float</span>
<span class="sd">    :param t0: The reference temperature in Celsius. Defaults to 25 degrees Celsius.</span>

<span class="sd">    :return: A new NTCModel instance.</span>
<span class="sd">    :rtype: NTCModel</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r0</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">beta</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">t0</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">25</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;NTCModel&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r0</span> <span class="o">=</span> <span class="n">r0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beta</span> <span class="o">=</span> <span class="n">beta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">t0</span> <span class="o">=</span> <span class="n">t0</span> <span class="o">+</span> <span class="mf">273.15</span>  <span class="c1"># convert T0 from Celsius to Kelvin</span>

<div class="viewcode-block" id="NTCModel.apply">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.NTCModel.apply">[docs]</a>
    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resistance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply the NTCModel to a given resistance value.</span>

<span class="sd">        :param resistance: The resistance value to apply the NTCModel to.</span>
<span class="sd">        :type resistance: float</span>

<span class="sd">        :return: The temperature in Celsius.</span>
<span class="sd">        :rtype: float</span>

<span class="sd">        Note</span>
<span class="sd">        ----</span>
<span class="sd">        The temperature is calculated using the formula</span>
<span class="sd">        T = 1 / (1 / T0 + 1 / beta * ln(R/R0))</span>
<span class="sd">        where T0 is the reference temperature in Kelvin, beta is the beta value</span>
<span class="sd">        of the NTC thermistor, R is the given resistance value, and R0 is the</span>
<span class="sd">        nominal resistance of the NTC thermistor at the reference temperature.</span>
<span class="sd">        The result is converted from Kelvin to Celsius before being returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">temperature</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">t0</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">beta</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">resistance</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">r0</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">temperature</span> <span class="o">-</span> <span class="mf">273.15</span>  <span class="c1"># convert temperature from Kelvin to Celsius</span></div>


<div class="viewcode-block" id="NTCModel.to_string">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.NTCModel.to_string">[docs]</a>
    <span class="k">def</span> <span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: A string representation of the NTCModel instance.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;NTCModel(r0=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">r0</span><span class="si">}</span><span class="s2">, beta=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">beta</span><span class="si">}</span><span class="s2">, t0=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">273.15</span><span class="si">}</span><span class="s2">)&quot;</span></div>
</div>



<div class="viewcode-block" id="PTxModel">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.PTxModel">[docs]</a>
<span class="k">class</span> <span class="nc">PTxModel</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">ModelMeta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A model for a PT100 or PT1000 or similar platinum resistance temperature sensor (PTx).</span>
<span class="sd">    The model describes the mathematical relationship between the resistance and temperature.</span>

<span class="sd">    :param r0: The nominal resistance of the PTx thermistor at the reference temperature.</span>
<span class="sd">    :type r0: float</span>

<span class="sd">    :return: A new PTxModel instance.</span>
<span class="sd">    :rtype: PTxModel</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r0</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;PTxModel&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r0</span> <span class="o">=</span> <span class="n">r0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">3.85e-3</span>

<div class="viewcode-block" id="PTxModel.apply">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.PTxModel.apply">[docs]</a>
    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resistance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply the PTxModel to a given resistance value.</span>

<span class="sd">        :param resistance: The resistance value to apply the PTxModel to.</span>
<span class="sd">        :type resistance: float</span>

<span class="sd">        :return: The temperature in Celsius.</span>
<span class="sd">        :rtype: float</span>

<span class="sd">        Note</span>
<span class="sd">        ----</span>
<span class="sd">        The temperature is calculated using the formula</span>
<span class="sd">        T = (R - R0) / (R0 * alpha)</span>
<span class="sd">        where R is the given resistance value, R0 is the nominal resistance of the</span>
<span class="sd">        PTx thermistor at the reference temperature, and alpha is the temperature</span>
<span class="sd">        coefficient of the PTx thermistor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">resistance</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">r0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">r0</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">)</span></div>


<div class="viewcode-block" id="PTxModel.to_string">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.PTxModel.to_string">[docs]</a>
    <span class="k">def</span> <span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: A string representation of the PTxModel instance.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;PTxModel(r0=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">r0</span><span class="si">}</span><span class="s2">)&quot;</span></div>
</div>



<div class="viewcode-block" id="KTYxModel">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.KTYxModel">[docs]</a>
<span class="k">class</span> <span class="nc">KTYxModel</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">ModelMeta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A model for a KTY81-110 or similar silicon temperature sensor.</span>
<span class="sd">    The model describes the mathematical relationship between the sensor&#39;s resistance and temperature.</span>

<span class="sd">    :param r0: The nominal resistance of the KTYx thermistor at the reference temperature T0.</span>
<span class="sd">    :type r0: float</span>
<span class="sd">    :param alpha: The temperature coefficient of the KTYx thermistor. Defaults to 7.88e-3.</span>
<span class="sd">    :type alpha: float</span>
<span class="sd">    :param beta: The non-linear coefficient of the KTYx thermistor. Defaults to 1.937e-5.</span>
<span class="sd">    :type beta: float</span>
<span class="sd">    :param t0: The reference temperature in Celsius. Defaults to 25 degrees Celsius.</span>

<span class="sd">    :return: A new KTYxModel instance.</span>
<span class="sd">    :rtype: KTYxModel</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">r0</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">alpha</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">7.88e-3</span><span class="p">,</span>
        <span class="n">beta</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.937e-5</span><span class="p">,</span>
        <span class="n">t0</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">25.0</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;KTYxModel&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r0</span> <span class="o">=</span> <span class="n">r0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">alpha</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beta</span> <span class="o">=</span> <span class="n">beta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">t0</span> <span class="o">=</span> <span class="n">t0</span>

<div class="viewcode-block" id="KTYxModel.apply">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.KTYxModel.apply">[docs]</a>
    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resistance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply the KTYxModel to a given resistance value.</span>

<span class="sd">        :param resistance: The resistance value to apply the KTYxModel to.</span>
<span class="sd">        :type resistance: float</span>

<span class="sd">        :return: The temperature in Celsius.</span>
<span class="sd">        :rtype: float</span>

<span class="sd">        Note</span>
<span class="sd">        ----</span>
<span class="sd">        Calculation Info: https://docs.rs-online.com/2611/0900766b800910a6.pdf</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">kT</span> <span class="o">=</span> <span class="n">resistance</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">r0</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">beta</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">beta</span> <span class="o">*</span> <span class="n">kT</span>
        <span class="n">temperature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">t0</span> <span class="o">+</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">beta</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">temperature</span></div>


<div class="viewcode-block" id="KTYxModel.to_string">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.KTYxModel.to_string">[docs]</a>
    <span class="k">def</span> <span class="nf">to_string</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: A string representation of the KTYxModel instance.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;KTYxModel(r0=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">r0</span><span class="si">}</span><span class="s2">, alpha=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="si">}</span><span class="s2">, beta=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">beta</span><span class="si">}</span><span class="s2">, t0=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">t0</span><span class="si">}</span><span class="s2">)&quot;</span></div>
</div>



<div class="viewcode-block" id="Config">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Config">[docs]</a>
<span class="k">class</span> <span class="nc">Config</span><span class="p">(</span><span class="n">Serializable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class representing the configuration settings, allowing for easy access and manipulation of settings.</span>

<span class="sd">    :param kwargs: A dictionary of keyword arguments to set as attributes of the instance.</span>
<span class="sd">    :type kwargs: dict</span>

<span class="sd">    :return: Config instance</span>
<span class="sd">    :rtype: Config</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>



<div class="viewcode-block" id="ChannelProperties">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelProperties">[docs]</a>
<span class="k">class</span> <span class="nc">ChannelProperties</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class representing the properties of a channel.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ChannelProperties.Type">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelProperties.Type">[docs]</a>
    <span class="k">class</span> <span class="nc">Type</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :class:`Type` provides valid data types for ChannelProperties.Type</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">DIGITAL_IN</span> <span class="o">=</span> <span class="s2">&quot;digital_input&quot;</span>
        <span class="n">DIGITAL_OUT</span> <span class="o">=</span> <span class="s2">&quot;digital_output&quot;</span>
        <span class="n">FREQUENCY</span> <span class="o">=</span> <span class="s2">&quot;frequency&quot;</span>
        <span class="n">TEMPERATURE</span> <span class="o">=</span> <span class="s2">&quot;temperature&quot;</span>
        <span class="n">VOLTAGE</span> <span class="o">=</span> <span class="s2">&quot;voltage&quot;</span>
        <span class="n">CURRENT</span> <span class="o">=</span> <span class="s2">&quot;current&quot;</span>
        <span class="n">WEIGHT</span> <span class="o">=</span> <span class="s2">&quot;weight&quot;</span>
        <span class="n">PRESSURE</span> <span class="o">=</span> <span class="s2">&quot;pressure&quot;</span>
        <span class="n">FORCE</span> <span class="o">=</span> <span class="s2">&quot;force&quot;</span>
        <span class="n">TORQUE</span> <span class="o">=</span> <span class="s2">&quot;torque&quot;</span>
        <span class="n">ANGLE</span> <span class="o">=</span> <span class="s2">&quot;angle&quot;</span>
        <span class="n">VELOCITY</span> <span class="o">=</span> <span class="s2">&quot;velocity&quot;</span>
        <span class="n">OTHER</span> <span class="o">=</span> <span class="s2">&quot;other&quot;</span>

<div class="viewcode-block" id="ChannelProperties.Type.valid_types">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelProperties.Type.valid_types">[docs]</a>
        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">valid_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="nb">vars</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">())</span></div>


<div class="viewcode-block" id="ChannelProperties.Type.is_valid">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelProperties.Type.is_valid">[docs]</a>
        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">type</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">valid_types</span><span class="p">()</span></div>
</div>
</div>



<div class="viewcode-block" id="Channel">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel">[docs]</a>
<span class="k">class</span> <span class="nc">Channel</span><span class="p">(</span><span class="n">Serializable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class representing a single channel, encapsulating its properties and behavior.</span>

<span class="sd">    :param name: The name of the channel.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param type: The type of the channel.</span>
<span class="sd">    :type type: ChannelProperties.Type</span>
<span class="sd">    :param unit: The unit of measurement of the channel.</span>
<span class="sd">    :type unit: str</span>
<span class="sd">    :param model: The model of the channel.</span>
<span class="sd">    :type model: Model</span>

<span class="sd">    :return: Channel instance</span>
<span class="sd">    :rtype: Channel</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="n">ChannelProperties</span><span class="p">,</span> <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">Model</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ChannelProperties</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid channel type: </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>

<div class="viewcode-block" id="Channel.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;To be implemented by subclasses.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;This method should be implemented by subclasses&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Channel.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;To be implemented by subclasses.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;This method should be implemented by subclasses&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Channel.set_model_from_str">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel.set_model_from_str">[docs]</a>
    <span class="k">def</span> <span class="nf">set_model_from_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the model of the channel from a string representation using the model registry.</span>

<span class="sd">        :param model_str: The string representation of the model.</span>
<span class="sd">        :type model_str: str</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>

<span class="sd">        :raise: ValueError</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Prepare the execution environment with available classes</span>
            <span class="n">model_registry</span> <span class="o">=</span> <span class="n">ModelMeta</span><span class="o">.</span><span class="n">model_registry</span>
            <span class="n">env</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;ModelMeta&quot;</span><span class="p">:</span> <span class="n">ModelMeta</span><span class="p">,</span>
                <span class="s2">&quot;StackedModel&quot;</span><span class="p">:</span> <span class="n">StackedModel</span><span class="p">,</span>
                <span class="o">**</span><span class="n">model_registry</span><span class="p">,</span>
            <span class="p">}</span>

            <span class="c1"># Extract the model class name and arguments</span>
            <span class="n">class_name</span> <span class="o">=</span> <span class="n">model_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">args_str</span> <span class="o">=</span> <span class="n">model_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">class_name</span> <span class="o">==</span> <span class="s2">&quot;StackedModel&quot;</span><span class="p">:</span>
                <span class="c1"># Handle StackedModel by parsing the list of models</span>
                <span class="n">model_list</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">parse_model_list</span><span class="p">(</span><span class="n">args_str</span><span class="p">,</span> <span class="n">model_registry</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">StackedModel</span><span class="p">(</span><span class="n">model_list</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Handle other models</span>
                <span class="n">exec_code</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;model = ModelMeta.model_registry.get(&#39;</span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2">&#39;)(</span><span class="si">{</span><span class="n">args_str</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="n">exec</span><span class="p">(</span><span class="n">exec_code</span><span class="p">,</span> <span class="p">{},</span> <span class="n">env</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">env</span><span class="p">[</span><span class="s2">&quot;model&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Model instantiation failed.&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error setting model from string: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">e</span></div>
</div>



<div class="viewcode-block" id="InputChannel">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.InputChannel">[docs]</a>
<span class="k">class</span> <span class="nc">InputChannel</span><span class="p">(</span><span class="n">Channel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class representing an input channel.</span>

<span class="sd">    :param name: The name of the channel.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param type: The type of the channel.</span>
<span class="sd">    :type type: ChannelProperties.Type</span>
<span class="sd">    :param unit: The unit of measurement of the channel.</span>
<span class="sd">    :type unit: str</span>
<span class="sd">    :param model: The model of the channel.</span>
<span class="sd">    :type model: Model</span>

<span class="sd">    :return: InputChannel instance</span>
<span class="sd">    :rtype: InputChannel</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">Model</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">)</span>

<div class="viewcode-block" id="InputChannel.read">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.InputChannel.read">[docs]</a>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Data</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;To be implemented by subclasses.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;This method should be implemented by subclasses&quot;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="OutputChannel">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.OutputChannel">[docs]</a>
<span class="k">class</span> <span class="nc">OutputChannel</span><span class="p">(</span><span class="n">Channel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class representing an output channel.</span>

<span class="sd">    :param name: The name of the channel.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param type: The type of the channel.</span>
<span class="sd">    :type type: ChannelProperties.Type</span>
<span class="sd">    :param unit: The unit of measurement of the channel.</span>
<span class="sd">    :type unit: str</span>
<span class="sd">    :param model: The model of the channel.</span>
<span class="sd">    :type model: Model</span>

<span class="sd">    :return: OutputChannel instance</span>
<span class="sd">    :rtype: OutputChannel</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">Model</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">)</span>

<div class="viewcode-block" id="OutputChannel.write">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.OutputChannel.write">[docs]</a>
    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;To be implemented by subclasses.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;This method should be implemented by subclasses&quot;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Module">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module">[docs]</a>
<span class="k">class</span> <span class="nc">Module</span><span class="p">(</span><span class="n">Serializable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A base class for module.</span>

<span class="sd">    :param name: The name of the module.</span>
<span class="sd">    :type name: str</span>

<span class="sd">    :return: Module instance</span>
<span class="sd">    :rtype: Module</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

<div class="viewcode-block" id="Module.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;To be implemented by subclasses.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;This method should be implemented by subclasses&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Module.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;To be implemented by subclasses.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;This method should be implemented by subclasses&quot;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="InputModule">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.InputModule">[docs]</a>
<span class="k">class</span> <span class="nc">InputModule</span><span class="p">(</span><span class="n">Module</span><span class="p">,</span> <span class="n">Channel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The InputModule base class is a subclass of Module and Channel, providing a specialized interface for handling input data.</span>
<span class="sd">    It defines the structure and behavior of an input module, which can be used to receive and process input data from various sources.</span>

<span class="sd">    :param name: The name of the module.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param type: The type of the channel.</span>
<span class="sd">    :type type: ChannelProperties.Type</span>
<span class="sd">    :param unit: The unit of measurement of the channel.</span>
<span class="sd">    :type unit: str</span>
<span class="sd">    :param model: The model of the channel.</span>
<span class="sd">    :type model: Model</span>

<span class="sd">    :return: InputModule instance</span>
<span class="sd">    :rtype: InputModule</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="n">ChannelProperties</span><span class="o">.</span><span class="n">Type</span><span class="p">,</span> <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">Model</span><span class="p">):</span>
        <span class="n">Module</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="n">Channel</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">)</span>

<div class="viewcode-block" id="InputModule.read">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.InputModule.read">[docs]</a>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Data</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;To be implemented by subclasses.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;This method should be implemented by subclasses&quot;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="OutputModule">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.OutputModule">[docs]</a>
<span class="k">class</span> <span class="nc">OutputModule</span><span class="p">(</span><span class="n">Module</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The OutputModule base class is a subclass of Module, providing a specialized interface for handling output data.</span>
<span class="sd">    It defines the structure and behavior of an output module, which can be used to send and display output data to various destinations.</span>

<span class="sd">    :param name: The name of the module0.</span>
<span class="sd">    :type name: str</span>

<span class="sd">    :return: OutputModule instance</span>
<span class="sd">    :rtype: OutputModule</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>

<div class="viewcode-block" id="OutputModule.write">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.OutputModule.write">[docs]</a>
    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;To be implemented by subclasses.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;This method should be implemented by subclasses&quot;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="ChannelManager">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelManager">[docs]</a>
<span class="k">class</span> <span class="nc">ChannelManager</span><span class="p">(</span><span class="n">Serializable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class responsible for managing channels.</span>
<span class="sd">    The ChannelManager class provides a centralized interface for creating, configuring, and managing multiple channels such input and output or multi (mixed) channels.</span>

<span class="sd">    :param input_channels: A list of input channels. Defaults to an empty list.</span>
<span class="sd">    :type input_channels: List[InputChannel]</span>
<span class="sd">    :param output_channels: A list of output channels. Defaults to an empty list.</span>
<span class="sd">    :type output_channels: List[OutputChannel]</span>
<span class="sd">    :param multi_channels: A list of multi channels. Defaults to an empty list.</span>
<span class="sd">    :type multi_channels: List[MultiChannel]</span>

<span class="sd">    :return: ChannelManager instance</span>
<span class="sd">    :rtype: ChannelManager</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_channels</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># TODO: IMPROVEMENT: combine to single generic list and make differentiation in functions later</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_channels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">multi_channels</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_existing_channel_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># Used to check for duplicate channel names</span>

<div class="viewcode-block" id="ChannelManager.add_channels">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelManager.add_channels">[docs]</a>
    <span class="k">def</span> <span class="nf">add_channels</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">channels</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
            <span class="n">InputChannel</span><span class="p">,</span>
            <span class="n">List</span><span class="p">[</span><span class="n">InputChannel</span><span class="p">],</span>
            <span class="n">OutputChannel</span><span class="p">,</span>
            <span class="n">List</span><span class="p">[</span><span class="n">OutputChannel</span><span class="p">],</span>
            <span class="n">MultiChannel</span><span class="p">,</span>
            <span class="n">List</span><span class="p">[</span><span class="n">MultiChannel</span><span class="p">],</span>
        <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add channels to the ChannelManager instance.</span>

<span class="sd">        :param channels: The channels to add to the ChannelManager instance. Defaults to an empty list.</span>
<span class="sd">        :type channels: Union[InputChannel, List[InputChannel], OutputChannel, List[OutputChannel], MultiChannel, List[MultiChannel]]</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>

<span class="sd">        :raise: ValueError</span>
<span class="sd">            If a channel with a duplicate name is added.</span>
<span class="sd">        :raise: TypeError</span>
<span class="sd">            If the channel is not an instance of InputChannel, OutputChannel, or MultiChannel.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channels</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">channels</span> <span class="o">=</span> <span class="p">[</span><span class="n">channels</span><span class="p">]</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channels</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_existing_channel_names</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicate channel name: </span><span class="si">{</span><span class="n">channel</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">InputChannel</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_channels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">OutputChannel</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">output_channels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">MultiChannel</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">multi_channels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Channel must be an instance of InputChannel, OutputChannel, or MultiChannel&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_existing_channel_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ChannelManager.get_channels">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelManager.get_channels">[docs]</a>
    <span class="k">def</span> <span class="nf">get_channels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Channel</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a generator of all channels in the ChannelManager instance.</span>

<span class="sd">        This method returns a generator of all channels in the ChannelManager</span>
<span class="sd">        instance. The generator yields each channel in the order they were</span>
<span class="sd">        added to the ChannelManager instance.</span>

<span class="sd">        :return: A generator of all channels in the ChannelManager instance.</span>
<span class="sd">        :rtype: Generator[Channel, None, None]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">input_channels</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_channels</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">multi_channels</span>
        <span class="p">):</span>  <span class="c1"># TODO: check if self.multi_channels should be excluded!!</span>
            <span class="k">yield</span> <span class="n">channel</span></div>


<div class="viewcode-block" id="ChannelManager.get_channels_by_name">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelManager.get_channels_by_name">[docs]</a>
    <span class="k">def</span> <span class="nf">get_channels_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Channel</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a generator of channels in the ChannelManager instance with the given name.</span>

<span class="sd">        :param name: The name of the channel to search for.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :return: A generator of channels in the ChannelManager instance with the given name.</span>
<span class="sd">        :rtype: Generator[Channel, None, None]</span>

<span class="sd">        :raise: ValueError</span>
<span class="sd">            If no channel with the given name is found in the ChannelManager instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_channels</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">channel</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Channel not found: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="ChannelManager.get_channels_by_type">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelManager.get_channels_by_type">[docs]</a>
    <span class="k">def</span> <span class="nf">get_channels_by_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Channel</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a generator of channels in the ChannelManager instance with the given type.</span>

<span class="sd">        :param type: The type of the channel to search for.</span>
<span class="sd">        :type type: str</span>

<span class="sd">        :return: A generator of channels in the ChannelManager instance with the given type.</span>
<span class="sd">        :rtype: Generator[Channel, None, None]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_channels</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">ChannelProperties</span><span class="o">.</span><span class="n">Type</span> <span class="o">==</span> <span class="nb">type</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">channel</span></div>

        <span class="c1"># raise ValueError(f&quot;Type not found: {type}&quot;)  # TODO: check if needed</span>

<div class="viewcode-block" id="ChannelManager.get_modules">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelManager.get_modules">[docs]</a>
    <span class="k">def</span> <span class="nf">get_modules</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Module</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a generator of modules in the ChannelManager instance.</span>

<span class="sd">        :return: A generator of modules in the ChannelManager instance.</span>
<span class="sd">        :rtype: Generator[Module, None, None]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">module</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">multi_channels</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">module</span></div>


<div class="viewcode-block" id="ChannelManager.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.ChannelManager.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close all channels in the ChannelManager instance.</span>

<span class="sd">        This method closes all channels in the ChannelManager instance by calling</span>
<span class="sd">        the close method on each channel. The close method is called only once</span>
<span class="sd">        for each channel, even if the channel is part of multiple lists (e.g.</span>
<span class="sd">        input_channels and output_channels).</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">closed_channels</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_channels</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">channel</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">closed_channels</span><span class="p">:</span>
                <span class="n">channel</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="n">closed_channels</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="MultiChannel">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiChannel">[docs]</a>
<span class="k">class</span> <span class="nc">MultiChannel</span><span class="p">(</span><span class="n">ChannelManager</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class that extends ChannelManager to support multiple channels.</span>

<span class="sd">    The MultiChannel class builds upon the ChannelManager&#39;s functionality by providing features for managing multiple channels simultaneously.</span>

<span class="sd">    :param name: The name of the MultiChannel instance.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param input_channels: A list of input channels to add to the MultiChannel instance. Defaults to an empty list.</span>
<span class="sd">    :type input_channels: List[InputChannel]</span>
<span class="sd">    :param output_channels: A list of output channels to add to the MultiChannel instance. Defaults to an empty list.</span>
<span class="sd">    :type output_channels: List[OutputChannel]</span>

<span class="sd">    :return: MultiChannel instance</span>
<span class="sd">    :rtype: MultiChannel</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">input_channels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">InputChannel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">output_channels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">OutputChannel</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">input_channels</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">output_channels</span><span class="p">)</span>

<div class="viewcode-block" id="MultiChannel.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiChannel.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close all channels in the MultiChannel instance.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="Hardware">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware">[docs]</a>
<span class="k">class</span> <span class="nc">Hardware</span><span class="p">(</span><span class="n">ChannelManager</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class that extends ChannelManager to provide an interface for interacting with hardware components.</span>

<span class="sd">    :param name: The name of the hardware instance.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param input_channels: A list of input channels to add to the hardware instance. Defaults to an empty list.</span>
<span class="sd">    :type input_channels: List[InputChannel]</span>
<span class="sd">    :param output_channels: A list of output channels to add to the hardware instance. Defaults to an empty list.</span>
<span class="sd">    :type output_channels: List[OutputChannel]</span>
<span class="sd">    :param multi_channels: A list of multi channels to add to the hardware instance. Defaults to an empty list.</span>
<span class="sd">    :type multi_channels: List[MultiChannel]</span>

<span class="sd">    :return: Hardware instance</span>
<span class="sd">    :rtype: Hardware</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">input_channels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">InputChannel</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">output_channels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">OutputChannel</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">multi_channels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">MultiChannel</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="k">if</span> <span class="n">input_channels</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">input_channels</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">output_channels</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">output_channels</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">multi_channels</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">multi_channels</span><span class="p">)</span>

<div class="viewcode-block" id="Hardware.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;To be implemented by subclasses.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;This method should be implemented by subclasses&quot;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Hardware_RaspberryPi">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_RaspberryPi">[docs]</a>
<span class="k">class</span> <span class="nc">Hardware_RaspberryPi</span><span class="p">(</span><span class="n">Hardware</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Raspberry Pi 5 hardware instance.</span>

<span class="sd">    :param name: The name of the hardware instance.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param gpiochip: The gpiochip to use. Defaults to 4.</span>

<span class="sd">    :return: Hardware_RaspberryPi instance</span>
<span class="sd">    :rtype: Hardware_RaspberryPi</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">gpiochip</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gpiochip</span> <span class="o">=</span> <span class="n">gpiochip</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<div class="viewcode-block" id="Hardware_RaspberryPi.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_RaspberryPi.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a Hardware_RaspberryPi instance.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="n">lgpio</span><span class="o">.</span><span class="n">gpiochip_open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gpiochip</span><span class="p">)</span>  <span class="c1"># Open gpiochip4 --&gt; GPIOs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">GPIOHandle</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>  <span class="c1"># Cast handle to GPIOHandle</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GPIOHandle</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: The handle of the gpiochip.</span>
<span class="sd">        :rtype: GPIOHandle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span>

    <span class="nd">@handle</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">:</span> <span class="n">GPIOHandle</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param handle: The handle of the gpiochip.</span>
<span class="sd">        :type handle: GPIOHandle</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">handle</span>

<div class="viewcode-block" id="Hardware_RaspberryPi.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_RaspberryPi.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the Hardware_RaspberryPi instance.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lgpio</span><span class="o">.</span><span class="n">gpiochip_close</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span> <span class="o">=</span> <span class="kc">None</span></div>
</div>



<div class="viewcode-block" id="Channel_RPI_FrequencyCounter">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_FrequencyCounter">[docs]</a>
<span class="k">class</span> <span class="nc">Channel_RPI_FrequencyCounter</span><span class="p">(</span><span class="n">InputChannel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Raspberry Pi-based frequency counter input channel.</span>
<span class="sd">    The frequency is measured continuously in a thread-safe way and can be read anytime using the `read` method.</span>

<span class="sd">    :param handle: The handle of the gpiochip.</span>
<span class="sd">    :type handle: GPIOHandle</span>
<span class="sd">    :param name: The name of the channel.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param pin: The pin to use for frequency counting.</span>
<span class="sd">    :type pin: int</span>
<span class="sd">    :param unit: The unit of the frequency. Defaults to &quot;Hz&quot;.</span>
<span class="sd">    :type unit: str</span>
<span class="sd">    :param model: The model to use for frequency counting. Defaults to LinearModel(offset=0, gain=1).</span>
<span class="sd">    :type model: Model</span>
<span class="sd">    :param **config: Additional keyword arguments to store as a Config instance.</span>

<span class="sd">    :return: Channel_RPI_FrequencyCounter instance</span>
<span class="sd">    :rtype: Channel_RPI_FrequencyCounter</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">handle</span><span class="p">:</span> <span class="n">GPIOHandle</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">pin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Hz&quot;</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">LinearModel</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="o">**</span><span class="n">config</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">handle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pin</span> <span class="o">=</span> <span class="n">pin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>

        <span class="c1"># Store the config as an instance of Config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<div class="viewcode-block" id="Channel_RPI_FrequencyCounter.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_FrequencyCounter.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the Channel_RPI_FrequencyCounter instance.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">ChannelProperties</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">FREQUENCY</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_frequency</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">()</span>

        <span class="c1"># NOTE: check if needed and implement arguments in __init__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debounce_micros</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitor_duration_seconds</span> <span class="o">=</span> <span class="mf">0.1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_monitoring_edges</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">lgpio</span><span class="o">.</span><span class="n">BOTH_EDGES</span>
        <span class="p">)</span>  <span class="c1"># TODO: check if non 50% dutycycle signals are also valid with BOTH_EDGES</span>

        <span class="c1"># Setup GPIO</span>
        <span class="n">lgpio</span><span class="o">.</span><span class="n">gpio_claim_alert</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">gpio</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pin</span><span class="p">,</span> <span class="n">eFlags</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_monitoring_edges</span><span class="p">)</span>
        <span class="n">lgpio</span><span class="o">.</span><span class="n">gpio_set_debounce_micros</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">gpio</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pin</span><span class="p">,</span> <span class="n">debounce_micros</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_debounce_micros</span><span class="p">)</span>

        <span class="c1"># Initialize callback</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cb</span> <span class="o">=</span> <span class="n">lgpio</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">gpio</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pin</span><span class="p">,</span> <span class="n">edge</span><span class="o">=</span><span class="n">lgpio</span><span class="o">.</span><span class="n">BOTH_EDGES</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

        <span class="c1"># Start the background thread</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_stop_event</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_count_frequency</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread</span><span class="o">.</span><span class="n">daemon</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_monitor_duration_seconds</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_monitor_duration_seconds</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;WARNING: monitor_duration_seconds=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_monitor_duration_seconds</span><span class="si">}</span><span class="s2">, wait at least that time to get a valid measurement&quot;</span>
            <span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_count_frequency</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Measure the frequency of the input channel.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
            <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cb</span><span class="o">.</span><span class="n">reset_tally</span><span class="p">()</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_monitor_duration_seconds</span><span class="p">)</span>
            <span class="n">edge_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cb</span><span class="o">.</span><span class="n">tally</span><span class="p">()</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_monitoring_edges</span> <span class="o">==</span> <span class="n">lgpio</span><span class="o">.</span><span class="n">BOTH_EDGES</span><span class="p">:</span>
                <span class="n">frequency</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">edge_count</span> <span class="o">/</span> <span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
                <span class="p">)</span>  <span class="c1"># both edges -&gt; half period -&gt; double count, therefore divide by 2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">frequency</span> <span class="o">=</span> <span class="n">edge_count</span> <span class="o">/</span> <span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">)</span>

            <span class="c1"># thread save update of _frequency</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_frequency</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">frequency</span><span class="p">)</span>  <span class="c1"># * self.gain + self.offset</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_frequency</span><span class="p">)</span>

<div class="viewcode-block" id="Channel_RPI_FrequencyCounter.read">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_FrequencyCounter.read">[docs]</a>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Data</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read the frequency of the channel. Thread safe.</span>

<span class="sd">        :return: The frequency of the channel.</span>
<span class="sd">        :rtype: Data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="c1"># return self._frequency</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span></div>


<div class="viewcode-block" id="Channel_RPI_FrequencyCounter.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_FrequencyCounter.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the frequency counter channel.</span>

<span class="sd">        This method stops the frequency counter thread, cancels the callback,</span>
<span class="sd">        clears the data queue, and frees the GPIO pin.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_stop_event</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cb</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frequency</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">lgpio</span><span class="o">.</span><span class="n">gpio_free</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pin</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Channel_RPI_DigitalInput">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalInput">[docs]</a>
<span class="k">class</span> <span class="nc">Channel_RPI_DigitalInput</span><span class="p">(</span><span class="n">InputChannel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Raspberry Pi-based digital input channel.</span>

<span class="sd">    :param handle: The handle of the gpiochip.</span>
<span class="sd">    :param name: The name of the channel.</span>
<span class="sd">    :param pin: The pin to use for digital input.</span>
<span class="sd">    :param unit: The unit of the digital input. Defaults to &quot;High/Low&quot;.</span>
<span class="sd">    :param model: The model to use for digital input. Defaults to LinearModel(offset=0, gain=1).</span>
<span class="sd">    :param config: Additional keyword arguments to store as a Config instance.</span>

<span class="sd">    :return: A Channel_RPI_DigitalInput instance.</span>
<span class="sd">    :rtype: Channel_RPI_DigitalInput</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">handle</span><span class="p">:</span> <span class="n">GPIOHandle</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">pin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;High/Low&quot;</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">LinearModel</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="o">**</span><span class="n">config</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">handle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pin</span> <span class="o">=</span> <span class="n">pin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>

        <span class="c1"># Store the config as an instance of Config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<div class="viewcode-block" id="Channel_RPI_DigitalInput.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalInput.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the digital input channel.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">ChannelProperties</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">DIGITAL_IN</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pin_status</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">()</span>

        <span class="c1"># Setup GPIO</span>
        <span class="n">lgpio</span><span class="o">.</span><span class="n">gpio_claim_alert</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">gpio</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pin</span><span class="p">,</span> <span class="n">eFlags</span><span class="o">=</span><span class="n">lgpio</span><span class="o">.</span><span class="n">BOTH_EDGES</span><span class="p">)</span>
        <span class="n">lgpio</span><span class="o">.</span><span class="n">gpio_set_debounce_micros</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">gpio</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pin</span><span class="p">,</span> <span class="n">debounce_micros</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># Read the status of the pin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pin_status</span> <span class="o">=</span> <span class="n">lgpio</span><span class="o">.</span><span class="n">gpio_read</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">gpio</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pin</span><span class="p">)</span>

        <span class="c1"># Initialize callback</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cb</span> <span class="o">=</span> <span class="n">lgpio</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
            <span class="n">handle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span>
            <span class="n">gpio</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pin</span><span class="p">,</span>
            <span class="n">edge</span><span class="o">=</span><span class="n">lgpio</span><span class="o">.</span><span class="n">BOTH_EDGES</span><span class="p">,</span>
            <span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_callback</span><span class="p">,</span>
        <span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">,</span> <span class="n">gpio</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">tick</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Callback for the digital input pin.</span>

<span class="sd">        This method is called whenever the digital input pin changes state. It</span>
<span class="sd">        updates the pin status and adds the new value to the data queue.</span>

<span class="sd">        :param handle: The handle of the gpiochip.</span>
<span class="sd">        :param gpio: The GPIO pin number.</span>
<span class="sd">        :param level: The level of the GPIO pin (0 or 1).</span>
<span class="sd">        :param tick: The tick of the GPIO pin.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pin_status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">level</span><span class="p">))</span>  <span class="c1"># float(level) * self.gain + self.offset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pin_status</span><span class="p">)</span>

<div class="viewcode-block" id="Channel_RPI_DigitalInput.read">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalInput.read">[docs]</a>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Data</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read the digital input channel.</span>

<span class="sd">        :return: The digital input channel.</span>
<span class="sd">        :rtype: Data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span></div>


<div class="viewcode-block" id="Channel_RPI_DigitalInput.readRaw">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalInput.readRaw">[docs]</a>
    <span class="k">def</span> <span class="nf">readRaw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read the raw digital input channel.</span>

<span class="sd">        :return: The raw digital input channel.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">lgpio</span><span class="o">.</span><span class="n">gpio_read</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">gpio</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pin</span><span class="p">)</span></div>


<div class="viewcode-block" id="Channel_RPI_DigitalInput.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalInput.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the digital input channel.</span>

<span class="sd">        This method stops the callback, clears the data queue, and frees the GPIO pin.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cb</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pin_status</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">lgpio</span><span class="o">.</span><span class="n">gpio_free</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pin</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Channel_RPI_BufferedDigitalInput">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_BufferedDigitalInput">[docs]</a>
<span class="k">class</span> <span class="nc">Channel_RPI_BufferedDigitalInput</span><span class="p">(</span><span class="n">Channel_RPI_DigitalInput</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A buffered Raspberry Pi-based digital input channel.</span>

<span class="sd">    :param handle: The handle of the gpiochip.</span>
<span class="sd">    :param name: The name of the channel.</span>
<span class="sd">    :param pin: The pin to use for digital input.</span>
<span class="sd">    :param unit: The unit of the digital input. Defaults to &quot;High/Low&quot;.</span>
<span class="sd">    :param model: The model to use for digital input. Defaults to LinearModel(offset=0, gain=1).</span>
<span class="sd">    :param config: Additional keyword arguments to store as a Config instance.</span>

<span class="sd">    :return: A Channel_RPI_BufferedDigitalInput instance.</span>
<span class="sd">    :rtype: Channel_RPI_BufferedDigitalInput</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">handle</span><span class="p">:</span> <span class="n">GPIOHandle</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">pin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;High/Low&quot;</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">LinearModel</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="o">**</span><span class="n">config</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">handle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pin</span> <span class="o">=</span> <span class="n">pin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>

        <span class="c1"># # Store the config as an instance of Config</span>
        <span class="c1"># self.config = Config(**config)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<div class="viewcode-block" id="Channel_RPI_BufferedDigitalInput.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_BufferedDigitalInput.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a Channel_RPI_BufferedDigitalInput instance.</span>

<span class="sd">        This method calls the superclass&#39;s `initialize` method and initializes</span>
<span class="sd">        the internal data buffer.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>  <span class="c1"># TODO: what about the config??</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">()</span></div>


    <span class="k">def</span> <span class="nf">_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">,</span> <span class="n">gpio</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">tick</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Callback for the digital input pin.</span>

<span class="sd">        This method is called whenever the digital input pin changes state. It</span>
<span class="sd">        updates the pin status and adds the new value to the data queue.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">level</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

<div class="viewcode-block" id="Channel_RPI_BufferedDigitalInput.read">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_BufferedDigitalInput.read">[docs]</a>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Data</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: The last value of the buffered digital input channel.</span>
<span class="sd">        :rtype: Data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span></div>


<div class="viewcode-block" id="Channel_RPI_BufferedDigitalInput.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_BufferedDigitalInput.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the buffered digital input channel.</span>

<span class="sd">        This method clears the data queue and calls the superclass&#39;s `close` method.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="Channel_RPI_DigitalOutput">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalOutput">[docs]</a>
<span class="k">class</span> <span class="nc">Channel_RPI_DigitalOutput</span><span class="p">(</span><span class="n">OutputChannel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Raspberry Pi-based digital output channel.</span>

<span class="sd">    :param handle: The handle of the gpiochip.</span>
<span class="sd">    :param name: The name of the channel.</span>
<span class="sd">    :param pin: The pin to use for digital output.</span>
<span class="sd">    :param unit: The unit of the digital output. Defaults to &quot;High/Low&quot;.</span>
<span class="sd">    :param model: The model to use for digital output. Defaults to LinearModel(offset=0, gain=1).</span>
<span class="sd">    :param config: Additional keyword arguments to store as a Config instance.</span>

<span class="sd">    :return: A Channel_RPI_DigitalOutput instance.</span>
<span class="sd">    :rtype: Channel_RPI_DigitalOutput</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">handle</span><span class="p">:</span> <span class="n">GPIOHandle</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">pin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;High/Low&quot;</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">LinearModel</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="o">**</span><span class="n">config</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">handle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pin</span> <span class="o">=</span> <span class="n">pin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>

        <span class="c1"># Store the config as an instance of Config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<div class="viewcode-block" id="Channel_RPI_DigitalOutput.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalOutput.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the digital output channel.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">ChannelProperties</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">DIGITAL_OUT</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Setup GPIO</span>
        <span class="n">level</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">lgpio</span><span class="o">.</span><span class="n">gpio_claim_output</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pin</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="n">lFlags</span><span class="o">=</span><span class="n">lgpio</span><span class="o">.</span><span class="n">SET_PULL_DOWN</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="n">level</span></div>


<div class="viewcode-block" id="Channel_RPI_DigitalOutput.write">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalOutput.write">[docs]</a>
    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write the given value to the digital output channel.</span>

<span class="sd">        :param value: The value to write to the digital output channel.</span>
<span class="sd">        :type value: int</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lgpio</span><span class="o">.</span><span class="n">gpio_write</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">gpio</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pin</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="n">value</span></div>


<div class="viewcode-block" id="Channel_RPI_DigitalOutput.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_DigitalOutput.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the digital output channel.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">level</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">lgpio</span><span class="o">.</span><span class="n">gpio_free</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pin</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Channel_RPI_InternalTemperature">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_InternalTemperature">[docs]</a>
<span class="k">class</span> <span class="nc">Channel_RPI_InternalTemperature</span><span class="p">(</span><span class="n">InputChannel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Raspberry Pi-based internal temperature input channel.</span>

<span class="sd">    :param name: The name of the channel.</span>
<span class="sd">    :param unit: The unit of the temperature. Defaults to &quot;Celsius&quot;.</span>
<span class="sd">    :param model: The model to use for internal temperature measurement. Defaults to LinearModel(offset=0, gain=1).</span>
<span class="sd">    :param config: Additional keyword arguments to store as a Config instance.</span>

<span class="sd">    :return: A Channel_RPI_InternalTemperature instance.</span>
<span class="sd">    :rtype: Channel_RPI_InternalTemperature</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;InternalTemperature&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;Celsius&quot;</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">LinearModel</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="o">**</span><span class="n">config</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>

        <span class="c1"># Store the config as an instance of Config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<div class="viewcode-block" id="Channel_RPI_InternalTemperature.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_InternalTemperature.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the internal temperature channel.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">ChannelProperties</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">TEMPERATURE</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">()</span></div>


<div class="viewcode-block" id="Channel_RPI_InternalTemperature.read">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_InternalTemperature.read">[docs]</a>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Data</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read the internal temperature of the Raspberry Pi.</span>

<span class="sd">        This method reads the internal temperature of the Raspberry Pi by executing</span>
<span class="sd">        the &quot;vcgencmd measure_temp&quot; command and parsing the output.</span>

<span class="sd">        :return: The internal temperature of the Raspberry Pi.</span>
<span class="sd">        :rtype: Data</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="s2">&quot;vcgencmd measure_temp&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
        <span class="c1"># Remove anything not like a digit or a decimal point</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;[^0-9.]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
        <span class="n">temperature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>  <span class="c1"># float(result) * self.gain + self.offset</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="n">temperature</span><span class="p">)</span>

        <span class="c1"># return self._temperature</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span></div>


<div class="viewcode-block" id="Channel_RPI_InternalTemperature.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_RPI_InternalTemperature.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the internal temperature channel and clears the data buffer.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># self._temperature = None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="Module_RPI_StepperMotor">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor">[docs]</a>
<span class="k">class</span> <span class="nc">Module_RPI_StepperMotor</span><span class="p">(</span><span class="n">MultiChannel</span><span class="p">,</span> <span class="n">OutputModule</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Raspberry Pi-based stepper motor control module.</span>

<span class="sd">    :param handle: The handle of the gpiochip.</span>
<span class="sd">    :param name: The name of the module.</span>
<span class="sd">    :param step_pin: The pin to use for step signal output.</span>
<span class="sd">    :param dir_pin: The pin to use for direction signal output.</span>
<span class="sd">    :param enable_pin: The pin to use for enable signal output.</span>
<span class="sd">    :param limitA_pin: The pin to use for limit A signal input.</span>
<span class="sd">    :param limitB_pin: The pin to use for limit B signal input.</span>
<span class="sd">    :param config: Additional keyword arguments to store as a Config instance.</span>

<span class="sd">    :return: A Module_RPI_StepperMotor instance.</span>
<span class="sd">    :rtype: Module_RPI_StepperMotor</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">handle</span><span class="p">:</span> <span class="n">GPIOHandle</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">step_pin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">dir_pin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">enable_pin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">limitA_pin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">limitB_pin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="o">**</span><span class="n">config</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">handle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">step_pin</span> <span class="o">=</span> <span class="n">step_pin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dir_pin</span> <span class="o">=</span> <span class="n">dir_pin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_pin</span> <span class="o">=</span> <span class="n">enable_pin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">limitA_pin</span> <span class="o">=</span> <span class="n">limitA_pin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">limitB_pin</span> <span class="o">=</span> <span class="n">limitB_pin</span>

        <span class="c1"># Store the config as an instance of Config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<div class="viewcode-block" id="Module_RPI_StepperMotor.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the Module_RPI_StepperMotor instance.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">MultiChannel</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">input_channels</span><span class="o">=</span><span class="p">[],</span> <span class="n">output_channels</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">OutputModule</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_channel_step_pin</span> <span class="o">=</span> <span class="n">Channel_RPI_DigitalOutput</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="s2">&quot;StepPin&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_pin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channel_dir_pin</span> <span class="o">=</span> <span class="n">Channel_RPI_DigitalOutput</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="s2">&quot;DirPin&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dir_pin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channel_enable_pin</span> <span class="o">=</span> <span class="n">Channel_RPI_DigitalOutput</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="s2">&quot;EnablePin&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">enable_pin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channel_limitA_pin</span> <span class="o">=</span> <span class="n">Channel_RPI_DigitalInput</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="s2">&quot;LimitAPin&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">limitA_pin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channel_limitB_pin</span> <span class="o">=</span> <span class="n">Channel_RPI_DigitalInput</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="s2">&quot;LimitBPin&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">limitB_pin</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel_step_pin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel_dir_pin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel_enable_pin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel_limitA_pin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel_limitB_pin</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_thread</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_running</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_max_steps</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="mi">0</span></div>


<div class="viewcode-block" id="Module_RPI_StepperMotor.enable_stepper">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.enable_stepper">[docs]</a>
    <span class="k">def</span> <span class="nf">enable_stepper</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable the stepper motor.</span>

<span class="sd">        This method will set the enable pin to HIGH to enable the stepper motor.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channel_enable_pin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></div>


<div class="viewcode-block" id="Module_RPI_StepperMotor.disable_stepper">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.disable_stepper">[docs]</a>
    <span class="k">def</span> <span class="nf">disable_stepper</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Disable the stepper motor.</span>

<span class="sd">        This method will set the enable pin to LOW to disable the stepper motor.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channel_enable_pin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span></div>


<div class="viewcode-block" id="Module_RPI_StepperMotor.getPosition">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.getPosition">[docs]</a>
    <span class="k">def</span> <span class="nf">getPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the current position of the stepper motor.</span>

<span class="sd">        :return: The current position of the stepper motor.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span></div>


<div class="viewcode-block" id="Module_RPI_StepperMotor.setDirection">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.setDirection">[docs]</a>
    <span class="k">def</span> <span class="nf">setDirection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the direction of the stepper motor.</span>

<span class="sd">        :param direction: 1 to move towards limitA, 0 to move towards limitB.</span>
<span class="sd">        :type direction: int</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_channel_dir_pin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_direction</span> <span class="o">=</span> <span class="n">direction</span></div>


<div class="viewcode-block" id="Module_RPI_StepperMotor.write">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.write">[docs]</a>
    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">steps</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write a command to the stepper motor to move a given number of steps in a given direction.</span>
<span class="sd">        The method will block until the move is complete.</span>

<span class="sd">        :param direction: 1 to move towards limitA, 0 to move towards limitB.</span>
<span class="sd">        :type direction: int</span>
<span class="sd">        :param steps: The number of steps to move.</span>
<span class="sd">        :type steps: int</span>
<span class="sd">        :param duration: The maximum time to wait for the move to complete.</span>
<span class="sd">        :type duration: float</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_drive_motor</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">direction</span><span class="p">,</span> <span class="n">steps</span><span class="p">,</span> <span class="n">duration</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread</span><span class="o">.</span><span class="n">daemon</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">duration</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># Wait for thread to finish</span></div>


    <span class="k">def</span> <span class="nf">_drive_motor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">steps</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Internal method to drive the stepper motor. (Thread function)</span>

<span class="sd">        :param direction: 1 to move towards limitA, 0 to move towards limitB.</span>
<span class="sd">        :type direction: int</span>
<span class="sd">        :param steps: The number of steps to move.</span>
<span class="sd">        :type steps: int</span>
<span class="sd">        :param duration: The maximum time to wait for the move to complete.</span>
<span class="sd">        :type duration: float</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_running</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_running</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># Limit Check Thread</span>
        <span class="k">def</span> <span class="nf">check_limits</span><span class="p">():</span>
            <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span><span class="o">.</span><span class="n">is_set</span><span class="p">():</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">direction</span> <span class="o">==</span> <span class="mi">1</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel_limitA_pin</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                    <span class="ow">or</span> <span class="n">direction</span> <span class="o">==</span> <span class="mi">0</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel_limitB_pin</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>  <span class="c1"># Check limits every 10ms</span>

        <span class="n">limit_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">check_limits</span><span class="p">)</span>
        <span class="n">limit_thread</span><span class="o">.</span><span class="n">daemon</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">limit_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="c1"># Set Direction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDirection</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span>

        <span class="c1"># Generate steps</span>
        <span class="k">if</span> <span class="n">duration</span><span class="p">:</span>
            <span class="n">steps_frequency</span> <span class="o">=</span> <span class="n">steps</span> <span class="o">/</span> <span class="n">duration</span>  <span class="c1"># Steps per second</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">steps_frequency</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># Steps per second</span>

        <span class="n">lgpio</span><span class="o">.</span><span class="n">tx_pwm</span><span class="p">(</span>
            <span class="n">handle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span>
            <span class="n">gpio</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel_step_pin</span><span class="o">.</span><span class="n">pin</span><span class="p">,</span>
            <span class="n">pwm_frequency</span><span class="o">=</span><span class="n">steps_frequency</span><span class="p">,</span>
            <span class="n">pwm_duty_cycle</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
            <span class="n">pulse_cycles</span><span class="o">=</span><span class="n">steps</span><span class="p">,</span>
        <span class="p">)</span>  <span class="c1"># Generate 50% PWM for steps</span>

        <span class="c1"># Wait until the desired number of steps are completed or stop event is set</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">duration</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">steps_frequency</span>
        <span class="p">)</span>  <span class="c1"># plus wait for one addional step --&gt; TODO: replace with step feedback loop</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_running</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Stop the limit check thread</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
        <span class="n">limit_thread</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_event</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

<div class="viewcode-block" id="Module_RPI_StepperMotor.calibrate">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.calibrate">[docs]</a>
    <span class="k">def</span> <span class="nf">calibrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout_steps</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calibrate the stepper motor.</span>

<span class="sd">        This method moves the stepper motor until it hits one of its limits,</span>
<span class="sd">        then moves it in the other direction until it hits the other limit.</span>
<span class="sd">        The maximum number of steps between the limits is stored in the</span>
<span class="sd">        _max_steps attribute.</span>

<span class="sd">        :param timeout_steps: The maximum number of steps to move.</span>
<span class="sd">        :type timeout_steps: int</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">steps_fwd</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">steps_bwd</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Move until limitA</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDirection</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_stepper</span><span class="p">()</span>

        <span class="n">steps_fwd</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel_limitA_pin</span><span class="o">.</span><span class="n">read</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_channel_step_pin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_channel_step_pin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
            <span class="n">steps_fwd</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">steps_fwd</span> <span class="o">&gt;</span> <span class="n">timeout_steps</span><span class="p">:</span>
                <span class="k">break</span>

        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

        <span class="c1"># Move until limitB</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDirection</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">steps_bwd</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel_limitB_pin</span><span class="o">.</span><span class="n">read</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_channel_step_pin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_channel_step_pin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
            <span class="n">steps_bwd</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">steps_bwd</span> <span class="o">&gt;</span> <span class="n">timeout_steps</span><span class="p">:</span>
                <span class="k">break</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">disable_stepper</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_max_steps</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">steps_fwd</span><span class="p">,</span> <span class="n">steps_bwd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Calibration complete. Max steps between limits: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_steps</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Module_RPI_StepperMotor.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_StepperMotor.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the Module_RPI_StepperMotor instance.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">MultiChannel</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Module_RPI_WeighScalesHX711">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711">[docs]</a>
<span class="k">class</span> <span class="nc">Module_RPI_WeighScalesHX711</span><span class="p">(</span><span class="n">MultiChannel</span><span class="p">,</span> <span class="n">InputModule</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Raspberry Pi-based HX711 weight scales input module.</span>

<span class="sd">    :param handle: The handle of the gpiochip.</span>
<span class="sd">    :type handle: GPIOHandle</span>
<span class="sd">    :param name: The name of the module.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param data_pin: The pin to use for data input from the HX711.</span>
<span class="sd">    :type data_pin: int</span>
<span class="sd">    :param clock_pin: The pin to use for clock input to the HX711.</span>
<span class="sd">    :type clock_pin: int</span>
<span class="sd">    :param model: The model of the HX711.</span>
<span class="sd">    :type model: Model</span>

<span class="sd">    :return: Module_RPI_WeighScalesHX711 instance</span>
<span class="sd">    :rtype: Module_RPI_WeighScalesHX711</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Module_RPI_WeighScalesHX711.ReadType">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.ReadType">[docs]</a>
    <span class="k">class</span> <span class="nc">ReadType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enumeration-like class representing different read types.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">RAW</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">AVG</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">MEDIAN</span> <span class="o">=</span> <span class="mi">2</span></div>


    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">handle</span><span class="p">:</span> <span class="n">GPIOHandle</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">data_pin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">clock_pin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">LinearModel</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="o">**</span><span class="n">config</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">handle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_pin</span> <span class="o">=</span> <span class="n">data_pin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clock_pin</span> <span class="o">=</span> <span class="n">clock_pin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>

        <span class="c1"># Store the config as an instance of Config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<div class="viewcode-block" id="Module_RPI_WeighScalesHX711.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the Module_RPI_WeighScalesHX711 instance.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">MultiChannel</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">input_channels</span><span class="o">=</span><span class="p">[],</span> <span class="n">output_channels</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">InputModule</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">ChannelProperties</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">WEIGHT</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;kg&quot;</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_channel_data_pin</span> <span class="o">=</span> <span class="n">Channel_RPI_DigitalInput</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;DATA&quot;</span><span class="p">,</span> <span class="n">pin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data_pin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channel_clock_pin</span> <span class="o">=</span> <span class="n">Channel_RPI_DigitalOutput</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;CLOCK&quot;</span><span class="p">,</span> <span class="n">pin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">clock_pin</span><span class="p">)</span>

        <span class="c1"># NOTE: issue when adding channels later on in &quot;get_channels&quot; of multi_channel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel_data_pin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel_clock_pin</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">()</span>

        <span class="c1"># default gain is 128</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hx711_gain</span> <span class="o">=</span> <span class="mi">128</span>

        <span class="c1"># Power down after initialization</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">powerDown</span><span class="p">()</span>

        <span class="c1"># Measure tara</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tara</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_measure_tara</span><span class="p">()</span></div>


<div class="viewcode-block" id="Module_RPI_WeighScalesHX711.read">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.read">[docs]</a>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="n">ReadType</span> <span class="o">=</span> <span class="n">ReadType</span><span class="o">.</span><span class="n">RAW</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Data</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read data from the HX711 module.</span>

<span class="sd">        :param type: The type of read to perform. Defaults to ReadType.RAW.</span>
<span class="sd">        :type type: Module_RPI_WeighScalesHX711.ReadType</span>
<span class="sd">        :param count: The number of values to read. Defaults to 5.</span>
<span class="sd">        :type count: int</span>

<span class="sd">        :return: Data object containing the read values.</span>
<span class="sd">        :rtype: Data</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ReadType</span><span class="o">.</span><span class="n">AVG</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readAverage</span><span class="p">(</span><span class="n">count</span><span class="o">=</span><span class="n">count</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ReadType</span><span class="o">.</span><span class="n">MEDIAN</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readMedian</span><span class="p">(</span><span class="n">count</span><span class="o">=</span><span class="n">count</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readRaw</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span></div>


    <span class="k">def</span> <span class="nf">_measure_tara</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Measure the tara (zero) value of the HX711 module.</span>

<span class="sd">        :return: The tara value.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tara</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readMedian</span><span class="p">(</span><span class="n">count</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">tara</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_is_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the HX711 module is ready for a measurement.</span>

<span class="sd">        This method will read the data pin of the HX711 module and return True if the</span>
<span class="sd">        pin is low (0), indicating that the module is ready for a measurement.</span>
<span class="sd">        Otherwise it will return False.</span>

<span class="sd">        :return: True if the module is ready for a measurement, False otherwise.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel_data_pin</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get_count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">val</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_last</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">val</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_send_clock_cycle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send a clock cycle to the HX711 module.</span>

<span class="sd">        :param count: The number of clock cycles to send. Defaults to 1.</span>
<span class="sd">        :type count: int</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_channel_clock_pin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_channel_clock_pin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_twos_complement_24bit_to_int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="c1"># Mask to get the lower 24 bits</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert a 24-bit two&#39;s complement number to an integer.</span>

<span class="sd">        :param data: The 24-bit two&#39;s complement number to convert.</span>
<span class="sd">        :type data: int</span>

<span class="sd">        :return: The integer value of the 24-bit two&#39;s complement number.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">mask</span> <span class="o">=</span> <span class="mh">0xFFFFFF</span>
        <span class="c1"># Apply the mask</span>
        <span class="n">data</span> <span class="o">&amp;=</span> <span class="n">mask</span>
        <span class="c1"># Check if the sign bit (24th bit) is set</span>
        <span class="k">if</span> <span class="n">data</span> <span class="o">&amp;</span> <span class="mh">0x800000</span><span class="p">:</span>  <span class="c1"># 0x800000 is the 24th bit (2^23)</span>
            <span class="c1"># If the sign bit is set, calculate the negative value</span>
            <span class="n">data</span> <span class="o">-=</span> <span class="mh">0x1000000</span>  <span class="c1"># Subtract 2^24</span>
        <span class="k">return</span> <span class="n">data</span>

<div class="viewcode-block" id="Module_RPI_WeighScalesHX711.wakeup">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.wakeup">[docs]</a>
    <span class="k">def</span> <span class="nf">wakeup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Wakeup the HX711 module with setting the clock pin low for 1 ms.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channel_clock_pin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span></div>


<div class="viewcode-block" id="Module_RPI_WeighScalesHX711.powerDown">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.powerDown">[docs]</a>
    <span class="k">def</span> <span class="nf">powerDown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Power down the HX711 module with setting the clock pin high for 1 ms.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_channel_clock_pin</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_wait_for_data_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t_timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># wait until HX711 is ready</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Wait until the HX711 module is ready for a measurement.</span>
<span class="sd">        The method will timeout and power down the module if it is not ready.</span>

<span class="sd">        :param t_timeout: The timeout in seconds. Defaults to 3.</span>
<span class="sd">        :type t_timeout: float</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">t_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_ready</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t_start</span> <span class="o">&gt;</span> <span class="n">t_timeout</span><span class="p">:</span>  <span class="c1"># timeout after 3 seconds</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">powerDown</span><span class="p">()</span>
                <span class="k">raise</span> <span class="ne">TimeoutError</span><span class="p">(</span><span class="s2">&quot;Timeout waiting for HX711&quot;</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_readBit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read a single bit from the HX711 module by sending a clock cycle.</span>

<span class="sd">        :return: The value of the bit.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_clock_cycle</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel_data_pin</span><span class="o">.</span><span class="n">readRaw</span><span class="p">()</span>  <span class="c1"># read is altert/callback based, use readRaw for direct read</span>

<div class="viewcode-block" id="Module_RPI_WeighScalesHX711.readRaw">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.readRaw">[docs]</a>
    <span class="k">def</span> <span class="nf">readRaw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t_timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read a single measurement from the HX711 module. Only 24 bits are supported.</span>

<span class="sd">        :param t_timeout: The timeout in seconds. Defaults to 3.</span>
<span class="sd">        :type t_timeout: float</span>

<span class="sd">        :return: The raw value of the measurement.</span>
<span class="sd">        :rtype: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wakeup</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">t_timeout</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_data_ready</span><span class="p">(</span><span class="n">t_timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

        <span class="c1"># get 24 bits</span>
        <span class="n">dataValue</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">24</span><span class="p">):</span>
            <span class="n">dataValue</span> <span class="o">=</span> <span class="p">(</span><span class="n">dataValue</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">_readBit</span><span class="p">()</span>

        <span class="c1"># send 25th bit: set channel A, gain=128 in next conversion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_send_clock_cycle</span><span class="p">(</span><span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># TODO: implement for other channels/gain</span>
        <span class="c1"># when sending 26th bit: set channel B, gain=32 in next conversion</span>
        <span class="c1"># when sending 27th bit: set channel A, gain=64 in next conversion</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">powerDown</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_twos_complement_24bit_to_int</span><span class="p">(</span><span class="n">dataValue</span><span class="p">)</span></div>


<div class="viewcode-block" id="Module_RPI_WeighScalesHX711.readAverage">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.readAverage">[docs]</a>
    <span class="k">def</span> <span class="nf">readAverage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read the average of &#39;count&#39; raw values.</span>

<span class="sd">        :param count: The number of values to read. Defaults to 5.</span>
<span class="sd">        :type count: int</span>

<span class="sd">        :return: The average of the &#39;count&#39; number of raw values.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">readRaw</span><span class="p">())</span>
            <span class="n">avg</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">//</span> <span class="n">count</span>
            <span class="c1"># time.sleep(0.1)</span>
        <span class="k">return</span> <span class="n">avg</span>  <span class="c1"># int(sum(self.readRaw() for _ in range(count)) / count)</span></div>


<div class="viewcode-block" id="Module_RPI_WeighScalesHX711.readMedian">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.readMedian">[docs]</a>
    <span class="k">def</span> <span class="nf">readMedian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read the median of &#39;count&#39; raw values.</span>

<span class="sd">        :param count: The number of values to read. Defaults to 5.</span>
<span class="sd">        :type count: int</span>

<span class="sd">        :return: The median of the &#39;count&#39; number of raw values.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">readRaw</span><span class="p">())</span>
            <span class="n">median</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">values</span><span class="p">)[</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">]</span>
            <span class="c1"># time.sleep(0.1)</span>
        <span class="k">return</span> <span class="n">median</span>  <span class="c1"># int(sorted(self.readRaw() for _ in range(count))[int(count / 2)])</span></div>


<div class="viewcode-block" id="Module_RPI_WeighScalesHX711.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_WeighScalesHX711.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the module.</span>

<span class="sd">        This method will clear the internal data queue and call the close method of the</span>
<span class="sd">        MultiChannel class to release any resources allocated by the module.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">MultiChannel</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># NOTE: self to ensure correct instance of close is called</span></div>
</div>



<div class="viewcode-block" id="Module_RPI_ServoMotor">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_ServoMotor">[docs]</a>
<span class="k">class</span> <span class="nc">Module_RPI_ServoMotor</span><span class="p">(</span><span class="n">MultiChannel</span><span class="p">,</span> <span class="n">OutputModule</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Raspberry Pi-based servo motor control module.</span>

<span class="sd">    :param handle: The handle of the gpiochip.</span>
<span class="sd">    :type handle: GPIOHandle</span>
<span class="sd">    :param name: The name of the module.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param servo_pin: The pin to use for servo motor control.</span>
<span class="sd">    :type servo_pin: int</span>
<span class="sd">    :param config: Additional keyword arguments to store as a Config instance.</span>
<span class="sd">    :type config: Config</span>

<span class="sd">    :return: A Module_RPI_ServoMotor instance.</span>
<span class="sd">    :rtype: Module_RPI_ServoMotor</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">:</span> <span class="n">GPIOHandle</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">servo_pin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">handle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">servo_pin</span> <span class="o">=</span> <span class="n">servo_pin</span>

        <span class="c1"># Store the config as an instance of Config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<div class="viewcode-block" id="Module_RPI_ServoMotor.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_ServoMotor.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the Module_RPI_ServoMotor instance.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MultiChannel</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">input_channels</span><span class="o">=</span><span class="p">[],</span> <span class="n">output_channels</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">OutputModule</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_channel_servo_pin</span> <span class="o">=</span> <span class="n">Channel_RPI_DigitalOutput</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;SERVO_PIN&quot;</span><span class="p">,</span> <span class="n">pin</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">servo_pin</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_servo_frequency</span> <span class="o">=</span> <span class="mi">50</span>  <span class="c1"># NOTE: check if needed and implement in __init__</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_channel_servo_pin</span><span class="p">)</span></div>


<div class="viewcode-block" id="Module_RPI_ServoMotor.write">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_ServoMotor.write">[docs]</a>
    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">percentage</span><span class="p">,</span> <span class="n">pulse_cycles</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the servo motor output to a given percentage of the total range.</span>

<span class="sd">        :param percentage: The percentage of the total range to set the servo motor output to.</span>
<span class="sd">            0% corresponds to 1000us and 100% corresponds to 2000us.</span>
<span class="sd">        :type percentage: float</span>
<span class="sd">        :param pulse_cycles: The number of pulse cycles to send. Defaults to 0, which means continuous servo motor output.</span>
<span class="sd">        :type pulse_cycles: int</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># 0% = 1000us</span>
        <span class="c1"># 100% = 2000us</span>
        <span class="n">pulseWidth</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">+</span> <span class="p">(</span><span class="mi">2000</span> <span class="o">-</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">*</span> <span class="n">percentage</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>

        <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel_servo_pin</span><span class="o">.</span><span class="n">_handle</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_channel_servo_pin</span><span class="o">.</span><span class="n">pin</span>
        <span class="n">lgpio</span><span class="o">.</span><span class="n">tx_servo</span><span class="p">(</span>
            <span class="n">handle</span><span class="o">=</span><span class="n">h</span><span class="p">,</span>
            <span class="n">gpio</span><span class="o">=</span><span class="n">p</span><span class="p">,</span>
            <span class="n">pulse_width</span><span class="o">=</span><span class="n">pulseWidth</span><span class="p">,</span>
            <span class="n">servo_frequency</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_servo_frequency</span><span class="p">,</span>
            <span class="n">pulse_offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">pulse_cycles</span><span class="o">=</span><span class="n">pulse_cycles</span><span class="p">,</span>
        <span class="p">)</span>  <span class="c1"># pulse_cycles=0 --&gt; continuous servo</span></div>


<div class="viewcode-block" id="Module_RPI_ServoMotor.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Module_RPI_ServoMotor.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the Hardware_DigilentMCC118 instance.</span>

<span class="sd">        This method closes all channels in the Hardware_DigilentMCC118 instance.</span>
<span class="sd">        It also stops the servo motor output and closes the underlying gpiochip handle.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">MultiChannel</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Hardware_DigilentMCC118">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_DigilentMCC118">[docs]</a>
<span class="k">class</span> <span class="nc">Hardware_DigilentMCC118</span><span class="p">(</span><span class="n">Hardware</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class representing the Digilent MCC 118 hardware device.</span>

<span class="sd">    :param name: The name of the hardware instance.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param hat_address: The address of the Digilent MCC 118.</span>
<span class="sd">    :type hat_address: str</span>

<span class="sd">    :return: A Hardware_DigilentMCC118 instance.</span>
<span class="sd">    :rtype: Hardware_DigilentMCC118</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">hat_address</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hat_address</span> <span class="o">=</span> <span class="n">hat_address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<div class="viewcode-block" id="Hardware_DigilentMCC118.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_DigilentMCC118.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a Hardware_DigilentMCC118 instance.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle</span> <span class="o">=</span> <span class="n">mcc118</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hat_address</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mcc118</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: The handle of the MCC 118 device.</span>
<span class="sd">        :rtype: mcc118</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span>

    <span class="nd">@handle</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">mcc118</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param value: The handle of the MCC 118 device.</span>
<span class="sd">        :type value: mcc118</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">value</span>

<div class="viewcode-block" id="Hardware_DigilentMCC118.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_DigilentMCC118.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the Hardware_DigilentMCC118 instance.</span>

<span class="sd">        This method closes all channels in the Hardware_DigilentMCC118 instance.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>
</div>

        <span class="c1"># TODO: check if ressource close is needed</span>


<div class="viewcode-block" id="Channel_MCC118_VoltageChannel">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC118_VoltageChannel">[docs]</a>
<span class="k">class</span> <span class="nc">Channel_MCC118_VoltageChannel</span><span class="p">(</span><span class="n">InputChannel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class representing a voltage input channel on the Digilent MCC 118 device.</span>

<span class="sd">    This class provides a software interface to a single voltage input channel on the MCC 118 device.</span>

<span class="sd">    :param handle: The handle of the MCC 118 device.</span>
<span class="sd">    :type handle: mcc118</span>
<span class="sd">    :param name: The name of the channel.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param channel: The channel number on the MCC 118 (0-7).</span>
<span class="sd">    :type channel: int</span>
<span class="sd">    :param unit: The unit of the voltage measurement. Defaults to &quot;V&quot;.</span>
<span class="sd">    :type unit: str</span>
<span class="sd">    :param model: The model to use for voltage measurement. Defaults to LinearModel(offset=0, gain=1).</span>
<span class="sd">    :type model: Model</span>
<span class="sd">    :param config: Additional keyword arguments to store as a Config instance.</span>
<span class="sd">    :type config: dict</span>

<span class="sd">    :return: A Channel_MCC118_VoltageChannel instance.</span>
<span class="sd">    :rtype: Channel_MCC118_VoltageChannel</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">handle</span><span class="p">:</span> <span class="n">mcc118</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;V&quot;</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">LinearModel</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="o">**</span><span class="n">config</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">handle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel</span> <span class="o">=</span> <span class="n">channel</span>  <span class="c1"># do not mix with self.hat.channels !</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>

        <span class="c1"># Store the config as an instance of Config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<div class="viewcode-block" id="Channel_MCC118_VoltageChannel.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC118_VoltageChannel.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the Channel_MCC118_VoltageChannel instance.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="n">ChannelProperties</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">VOLTAGE</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_options</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">OptionFlags</span><span class="o">.</span><span class="n">DEFAULT</span>
        <span class="p">)</span>  <span class="c1"># TODO: check if needed and implement in __init__ &amp; check if flags are correct</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">()</span></div>


<div class="viewcode-block" id="Channel_MCC118_VoltageChannel.read">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC118_VoltageChannel.read">[docs]</a>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Data</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read a voltage measurement from the channel.</span>

<span class="sd">        :return: The voltage measurement.</span>
<span class="sd">        :rtype: Data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_voltage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="o">.</span><span class="n">a_in_read</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">)</span>
        <span class="n">_voltage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">_voltage</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="n">_voltage</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span></div>


<div class="viewcode-block" id="Channel_MCC118_VoltageChannel.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC118_VoltageChannel.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the voltage channel.</span>

<span class="sd">        This method stops the voltage channel, clears the internal data.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_voltage</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>


<div class="viewcode-block" id="Channel_MCC118_VoltageChannel.to_dict">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC118_VoltageChannel.to_dict">[docs]</a>
    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: A dictionary representation of the voltage channel.</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># prevet RecursionError</span>
        <span class="n">original_hat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">d</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">original_hat</span>

        <span class="k">return</span> <span class="n">d</span></div>
</div>



<div class="viewcode-block" id="Hardware_DigilentMCC134">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_DigilentMCC134">[docs]</a>
<span class="k">class</span> <span class="nc">Hardware_DigilentMCC134</span><span class="p">(</span><span class="n">Hardware</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class representing the Digilent MCC 134 hardware device.</span>

<span class="sd">    :param name: The name of the hardware instance.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param hat_address: The address of the Digilent MCC 134.</span>
<span class="sd">    :type hat_address: str</span>

<span class="sd">    :return: A Hardware_DigilentMCC134 instance.</span>
<span class="sd">    :rtype: Hardware_DigilentMCC134</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">hat_address</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hat_address</span> <span class="o">=</span> <span class="n">hat_address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<div class="viewcode-block" id="Hardware_DigilentMCC134.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_DigilentMCC134.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize a Hardware_DigilentMCC134 instance.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle</span> <span class="o">=</span> <span class="n">mcc134</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hat_address</span><span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mcc134</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: The handle of the MCC 134 device.</span>
<span class="sd">        :rtype: mcc134</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span>

    <span class="nd">@handle</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">mcc134</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param value: The handle of the MCC 134 device.</span>
<span class="sd">        :type value: mcc134</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">value</span>

<div class="viewcode-block" id="Hardware_DigilentMCC134.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Hardware_DigilentMCC134.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the Hardware_DigilentMCC134 instance.</span>

<span class="sd">        This method closes all channels in the Hardware_DigilentMCC134 instance.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># TODO: check if ressource close is needed</span></div>
</div>



<div class="viewcode-block" id="Channel_MCC134_ThermocoupleChannel">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC134_ThermocoupleChannel">[docs]</a>
<span class="k">class</span> <span class="nc">Channel_MCC134_ThermocoupleChannel</span><span class="p">(</span><span class="n">InputChannel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class representing a temerature input channel on the Digilent MCC 134 device.</span>

<span class="sd">    This class provides a software interface to a single temerature input channel on the MCC 134 device.</span>

<span class="sd">    :param handle: The handle of the MCC 134 device.</span>
<span class="sd">    :type handle: mcc134</span>
<span class="sd">    :param name: The name of the channel.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param channel: The channel number on the MCC 134 (0-3).</span>
<span class="sd">    :type channel: int</span>
<span class="sd">    :param unit: The unit of the voltage measurement. Defaults to &quot;degC&quot;.</span>
<span class="sd">    :type unit: str</span>
<span class="sd">    :param model: The model to use for voltage measurement. Defaults to LinearModel(offset=0, gain=1).</span>
<span class="sd">    :type model: Model</span>
<span class="sd">    :param config: Additional keyword arguments to store as a Config instance.</span>
<span class="sd">    :type config: dict</span>

<span class="sd">    :return: A Channel_MCC134_ThermocoupleChannel instance.</span>
<span class="sd">    :rtype: Channel_MCC134_ThermocoupleChannel</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">handle</span><span class="p">:</span> <span class="n">mcc134</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">channel</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;degC&quot;</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">Model</span> <span class="o">=</span> <span class="n">LinearModel</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="o">**</span><span class="n">config</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">handle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel</span> <span class="o">=</span> <span class="n">channel</span>  <span class="c1"># do not mix with self.hat.channels !</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>

        <span class="c1"># Store the config as an instance of Config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="o">**</span><span class="n">config</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<div class="viewcode-block" id="Channel_MCC134_ThermocoupleChannel.initialize">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC134_ThermocoupleChannel.initialize">[docs]</a>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the Channel_MCC134_VoltageChannel instance.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">ChannelProperties</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">VOLTAGE</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="o">.</span><span class="n">tc_type_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="p">,</span> <span class="n">TcTypes</span><span class="o">.</span><span class="n">TYPE_K</span><span class="p">)</span>  <span class="c1"># NOTE: Hardcoded Type K, maybe improve</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="o">.</span><span class="n">update_interval_write</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># once per second</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">()</span></div>


<div class="viewcode-block" id="Channel_MCC134_ThermocoupleChannel.read">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC134_ThermocoupleChannel.read">[docs]</a>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Data</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read a temperature measurement from the channel.</span>

<span class="sd">        :return: The voltage measurement.</span>
<span class="sd">        :rtype: Data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">temperature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="o">.</span><span class="n">t_in_read</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="p">)</span>
        <span class="n">temperature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">temperature</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">add_value</span><span class="p">(</span><span class="n">temperature</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span></div>


<div class="viewcode-block" id="Channel_MCC134_ThermocoupleChannel.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC134_ThermocoupleChannel.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the temperature channel.</span>

<span class="sd">        This method stops the temperature channel, clears the internal data.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>


<div class="viewcode-block" id="Channel_MCC134_ThermocoupleChannel.to_dict">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.Channel_MCC134_ThermocoupleChannel.to_dict">[docs]</a>
    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: A dictionary representation of the temperature channel.</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># prevet RecursionError</span>
        <span class="n">original_hat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">d</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">original_hat</span>

        <span class="k">return</span> <span class="n">d</span></div>
</div>



<div class="viewcode-block" id="MultiHardware">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware">[docs]</a>
<span class="k">class</span> <span class="nc">MultiHardware</span><span class="p">(</span><span class="n">Serializable</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class representing a collection of hardware devices.</span>

<span class="sd">    :param name: The name of the multi-hardware instance.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param hardware_list: A list of hardware instances to be included in the multi-hardware instance. Defaults to an empty list.</span>
<span class="sd">    :type hardware_list: List[Hardware]</span>

<span class="sd">    :return: A MultiHardware instance.</span>
<span class="sd">    :rtype: MultiHardware</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">hardware_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Hardware</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hardware_list</span> <span class="o">=</span> <span class="n">hardware_list</span>

<div class="viewcode-block" id="MultiHardware.add_hardware">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware.add_hardware">[docs]</a>
    <span class="k">def</span> <span class="nf">add_hardware</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hardware_instance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a hardware instance to the collection.</span>

<span class="sd">        :param hardware_instance: The hardware instance to be added to the collection.</span>
<span class="sd">        :type hardware_instance: Hardware</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hardware_instance</span><span class="p">,</span> <span class="n">Hardware</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hardware_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hardware_instance</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;hardware_instance must be an instance of Hardware&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="MultiHardware.close">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware.close">[docs]</a>
    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the MultiHardware instance.</span>

<span class="sd">        This method calls the close method of all hardware instances in the collection.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">hardware</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hardware_list</span><span class="p">:</span>
            <span class="n">hardware</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="MultiHardware.get_channels">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware.get_channels">[docs]</a>
    <span class="k">def</span> <span class="nf">get_channels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Channel</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: A generator of all channels in the multi-hardware instance.</span>
<span class="sd">        :rtype: Generator[Channel, None, None]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">hardware</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hardware_list</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">hardware</span><span class="o">.</span><span class="n">get_channels</span><span class="p">():</span>
                <span class="k">yield</span> <span class="n">channel</span></div>


<div class="viewcode-block" id="MultiHardware.get_channels_by_name">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware.get_channels_by_name">[docs]</a>
    <span class="k">def</span> <span class="nf">get_channels_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Channel</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param name: The name of the channel to search for.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :return: A generator of channels in the multi-hardware instance with the given name.</span>
<span class="sd">        :rtype: Generator[Channel, None, None]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">hardware</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hardware_list</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">hardware</span><span class="o">.</span><span class="n">get_channels_by_name</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">channel</span></div>


<div class="viewcode-block" id="MultiHardware.get_channels_by_type">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware.get_channels_by_type">[docs]</a>
    <span class="k">def</span> <span class="nf">get_channels_by_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel_type</span><span class="p">:</span> <span class="n">ChannelProperties</span><span class="o">.</span><span class="n">Type</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Channel</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param channel_type: The type of the channel to search for.</span>
<span class="sd">        :type channel_type: ChannelProperties.Type</span>

<span class="sd">        :return: A generator of channels in the multi-hardware instance with the given type.</span>
<span class="sd">        :rtype: Generator[Channel, None, None]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">hardware</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hardware_list</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">hardware</span><span class="o">.</span><span class="n">get_channels_by_type</span><span class="p">(</span><span class="n">channel_type</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">channel</span></div>


<div class="viewcode-block" id="MultiHardware.get_hardware">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware.get_hardware">[docs]</a>
    <span class="k">def</span> <span class="nf">get_hardware</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Hardware</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: A generator of all hardware in the multi-hardware instance.</span>
<span class="sd">        :rtype: Generator[Hardware, None, None]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">hardware</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hardware_list</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">hardware</span></div>


<div class="viewcode-block" id="MultiHardware.get_hardware_by_name">
<a class="viewcode-back" href="../../../../reference.html#MeasurementSystem.core.driver.Hardware.MultiHardware.get_hardware_by_name">[docs]</a>
    <span class="k">def</span> <span class="nf">get_hardware_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Hardware</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param name: The name of the hardware to search for.</span>
<span class="sd">        :type name: str</span>

<span class="sd">        :return: A generator of hardware in the multi-hardware instance with the given name.</span>
<span class="sd">        :rtype: Generator[Hardware, None, None]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">hardware</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hardware_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">hardware</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">hardware</span></div>
</div>



<span class="c1">########################</span>
<span class="c1"># Example usage</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1"># Hardware: Raspberry Pi 5</span>
    <span class="n">rpi_hardware</span> <span class="o">=</span> <span class="n">Hardware_RaspberryPi</span><span class="p">(</span><span class="s2">&quot;RPI5&quot;</span><span class="p">)</span>

    <span class="c1"># Input Channels</span>
    <span class="n">rpi_input_channels</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Channel_RPI_FrequencyCounter</span><span class="p">(</span>
            <span class="n">handle</span><span class="o">=</span><span class="n">rpi_hardware</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;RPI_GPIO_18&quot;</span><span class="p">,</span>
            <span class="n">pin</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;Hz&quot;</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="n">LinearModel</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
            <span class="n">test</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">Channel_RPI_DigitalInput</span><span class="p">(</span>
            <span class="n">handle</span><span class="o">=</span><span class="n">rpi_hardware</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;RPI_GPIO_23&quot;</span><span class="p">,</span>
            <span class="n">pin</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;High/Low&quot;</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="n">LinearModel</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">Channel_RPI_InternalTemperature</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;InternalTemperature&quot;</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;Celsius&quot;</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="n">LinearModel</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
            <span class="n">sample_rate</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="c1"># Add more channels here if needed</span>
    <span class="p">]</span>
    <span class="n">rpi_hardware</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">rpi_input_channels</span><span class="p">)</span>

    <span class="c1"># Multi Channels</span>
    <span class="n">rpi_multi_channels</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Module_RPI_StepperMotor</span><span class="p">(</span>
            <span class="n">handle</span><span class="o">=</span><span class="n">rpi_hardware</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Stepper&quot;</span><span class="p">,</span>
            <span class="n">step_pin</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span>
            <span class="n">dir_pin</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
            <span class="n">enable_pin</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
            <span class="n">limitA_pin</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
            <span class="n">limitB_pin</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">Module_RPI_WeighScalesHX711</span><span class="p">(</span>
            <span class="n">handle</span><span class="o">=</span><span class="n">rpi_hardware</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;HX711&quot;</span><span class="p">,</span>
            <span class="n">data_pin</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
            <span class="n">clock_pin</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="n">LinearModel</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">22000</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">Module_RPI_ServoMotor</span><span class="p">(</span><span class="n">handle</span><span class="o">=</span><span class="n">rpi_hardware</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Servo_Module&quot;</span><span class="p">,</span> <span class="n">servo_pin</span><span class="o">=</span><span class="mi">22</span><span class="p">),</span>
        <span class="c1"># Add more multi channels here if needed</span>
    <span class="p">]</span>
    <span class="n">rpi_hardware</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">rpi_multi_channels</span><span class="p">)</span>

    <span class="c1"># # Test Stepper Motor</span>
    <span class="c1"># stepper = rpi_hardware.get_channels_by_name(&quot;Stepper&quot;)</span>
    <span class="c1"># assert isinstance(stepper, Module_RPI_StepperMotor)  # Check if it&#39;s an instance of StepperMotorChannels</span>
    <span class="c1"># stepper.write(direction=1, steps=5, duration=2)</span>
    <span class="c1"># stepper.write(direction=1, steps=5, duration=1)</span>

    <span class="c1"># # Test HX711</span>
    <span class="c1"># hx711 = rpi_hardware.get_channels_by_name(&quot;HX711&quot;)</span>
    <span class="c1"># assert isinstance(hx711, Module_RPI_WeighScalesHX711)  # Check if it&#39;s an instance of WeighScalesHX711</span>

    <span class="c1"># for i in range(10):</span>
    <span class="c1"># value = hx711.read(type=Module_RPI_WeighScalesHX711.ReadType.MEDIAN, count=5)</span>
    <span class="c1">#     print(&quot;HX711:&quot;,  value)</span>

    <span class="c1"># # Test Servo</span>
    <span class="c1"># servo = rpi_hardware.get_channels_by_name(&quot;Servo&quot;)</span>
    <span class="c1"># assert isinstance(servo, Module_RPI_ServoMotor)  # Check if it&#39;s an instance of ServoMotor</span>

    <span class="c1"># servo.write(percentage=0)</span>
    <span class="c1"># time.sleep(1)</span>
    <span class="c1"># servo.write(percentage=50)</span>
    <span class="c1"># time.sleep(1)</span>
    <span class="c1"># servo.write(percentage=100)</span>
    <span class="c1"># time.sleep(1)</span>

    <span class="c1"># Hardware: Digilent MCC118</span>
    <span class="n">mcc118_hardware</span> <span class="o">=</span> <span class="n">Hardware_DigilentMCC118</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;MCC118&quot;</span><span class="p">,</span> <span class="n">hat_address</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">mcc118_hardware</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

    <span class="n">mcc118_input_channels</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Channel_MCC118_VoltageChannel</span><span class="p">(</span>
            <span class="n">handle</span><span class="o">=</span><span class="n">mcc118_hardware</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;MCC118_0&quot;</span><span class="p">,</span>
            <span class="n">channel</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;V&quot;</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="n">LinearModel</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">Channel_MCC118_VoltageChannel</span><span class="p">(</span>
            <span class="n">handle</span><span class="o">=</span><span class="n">mcc118_hardware</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;MCC118_1&quot;</span><span class="p">,</span>
            <span class="n">channel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;V&quot;</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="n">KTYxModel</span><span class="p">(</span><span class="n">r0</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">,</span> <span class="n">t0</span><span class="o">=</span><span class="mf">25.0</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="c1"># Add more channels here if needed</span>
    <span class="p">]</span>

    <span class="n">mcc118_hardware</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">mcc118_input_channels</span><span class="p">)</span>

    <span class="c1"># Hardware: Multihardware</span>
    <span class="n">multi_hardware</span> <span class="o">=</span> <span class="n">MultiHardware</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;MeasurementSystem&quot;</span><span class="p">)</span>
    <span class="n">multi_hardware</span><span class="o">.</span><span class="n">add_hardware</span><span class="p">(</span><span class="n">rpi_hardware</span><span class="p">)</span>
    <span class="n">multi_hardware</span><span class="o">.</span><span class="n">add_hardware</span><span class="p">(</span><span class="n">mcc118_hardware</span><span class="p">)</span>

    <span class="c1"># # Example 1: Standard Loop to read all channels</span>
    <span class="c1"># for channel in multi_hardware.get_channels():</span>
    <span class="c1">#     if not isinstance(channel, InputChannel):</span>
    <span class="c1">#         continue</span>

    <span class="c1">#     for i in range(3) :</span>
    <span class="c1">#         val = channel.read()</span>
    <span class="c1">#         print(&quot;Channel&quot;, channel.name, &quot;Value: &quot;, val, channel.unit)</span>
    <span class="c1">#     print(&quot;--&quot;)</span>

    <span class="c1"># multi_hardware.close()</span>
    <span class="c1"># sys.exit(0)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----&quot;</span><span class="p">)</span>

    <span class="c1"># Example 2: Threaded Loop to read all channels</span>

    <span class="n">t_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time_ns</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">_ChannelReaderThread</span><span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">):</span>
        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">InputChannel</span><span class="p">,</span> <span class="n">InputModule</span><span class="p">],</span> <span class="n">sample_rate</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Reader-&quot;</span> <span class="o">+</span> <span class="n">channel</span><span class="o">.</span><span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">channel</span> <span class="o">=</span> <span class="n">channel</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sample_rate</span> <span class="o">=</span> <span class="n">sample_rate</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_running</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_running</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

                <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get_count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">value</span><span class="p">,</span> <span class="n">t_value</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_last</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">t_rel</span> <span class="o">=</span> <span class="p">(</span><span class="n">t_value</span> <span class="o">-</span> <span class="n">t_start</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**-</span><span class="mi">9</span>  <span class="c1"># convert to seconds</span>

                <span class="nb">print</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Time: </span><span class="si">{</span><span class="n">t_rel</span><span class="si">:</span><span class="s2">10.7f</span><span class="si">}</span><span class="s2"> - Channel: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">name</span><span class="si">:</span><span class="s2">&lt;20</span><span class="si">}</span><span class="s2">  Value: </span><span class="si">{</span><span class="n">value</span><span class="si">:</span><span class="s2">12.3f</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">unit</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sample_rate</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_running</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">sample_rates</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;RPI_GPIO_18&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;RPI_GPIO_23&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="s2">&quot;InternalTemperature&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;MCC118_0&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;MCC118_1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;HX711&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">readers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">multi_hardware</span><span class="o">.</span><span class="n">get_channels</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="p">(</span><span class="n">InputChannel</span><span class="p">,</span> <span class="n">InputModule</span><span class="p">)):</span>
            <span class="k">continue</span>

        <span class="n">reader</span> <span class="o">=</span> <span class="n">_ChannelReaderThread</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span> <span class="n">sample_rate</span><span class="o">=</span><span class="n">sample_rates</span><span class="p">[</span><span class="n">channel</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>
        <span class="n">reader</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="n">readers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

    <span class="c1"># Wait some time</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="c1"># close the readers</span>
    <span class="k">for</span> <span class="n">reader</span> <span class="ow">in</span> <span class="n">readers</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">_ChannelReaderThread</span><span class="p">)</span>  <span class="c1"># for code completion</span>
        <span class="n">reader</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">reader</span> <span class="ow">in</span> <span class="n">readers</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">_ChannelReaderThread</span><span class="p">)</span>  <span class="c1"># for code completion</span>
        <span class="n">reader</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">multi_hardware</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;done&quot;</span><span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Alfred Paar.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

</body>
</html>
